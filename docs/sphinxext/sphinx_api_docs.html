
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Sphinx API docs &#8212; Dynamic IPython: version0.0.2</title>
    <link rel="stylesheet" href="../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="canonical" href="https://farisachugthai.github.io/dynamic-ipython/sphinxext/sphinx_api_docs.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Custom Doctests" href="custom_doctests.html" />
    <link rel="prev" title="New IPython Console Lexer" href="lexer.html" />
<link charset="utf-8" href="https://fonts.googleapis.com/css?family=Source+Code+Pro" media="screen" rel="stylesheet" type="text/css" />
<link charset="utf-8" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:regular,italic,bold,bolditalic" media="screen" rel="stylesheet" type="text/css" />
<link rel='stylesheet' href='//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.css'>
<!--[if lte IE 6]>
  <link
    rel="stylesheet"
    href="../_static/ie6.css"
    type="text/css"
    media="screen"
    charset="utf-8"
  />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="custom_doctests.html" title="Custom Doctests"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="lexer.html" title="New IPython Console Lexer"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Dynamic IPython</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Sphinx extensions</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<div class="section" id="sphinx-api-docs">
<span id="id1"></span><h1>Sphinx API docs<a class="headerlink" href="#sphinx-api-docs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-IPython.sphinxext">
<span id="sphinx-package"></span><h2>Sphinx Package<a class="headerlink" href="#module-IPython.sphinxext" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-default_profile.sphinxext.ipython_directive">
<span id="package-submodules"></span><h2>Package submodules<a class="headerlink" href="#module-default_profile.sphinxext.ipython_directive" title="Permalink to this headline">¶</a></h2>
<p>This directive allows pasting of entire interactive IPython sessions, prompts
and all, and their code will actually get re-executed at doc build time, with
all prompts renumbered sequentially. It also allows you to input code as a pure
python input by giving the argument python to the directive. The output looks
like an interactive ipython section.</p>
<p>Here is an example of how the IPython directive can
<strong>run</strong> python code, at build time.</p>
<pre class="literal-block">In [1]: 1+1
Out[1]: 2

In [2]: import datetime
   ...: datetime.datetime.now()
   ...: 
Out[2]: datetime.datetime(2019, 10, 18, 15, 15, 27, 206791)</pre>
<p>It supports IPython construct that plain
Python does not understand (like magics):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="kn">import</span> <span class="nn">time</span>

<span class="gp">In [4]: </span><span class="o">%</span><span class="k">timeit</span> time.sleep(0.05)
<span class="go">61.6 ms +- 1.2 ms per loop (mean +- std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<p>This will also support top-level async when using IPython 7.0+</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">   ...: </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;before&#39;</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;after&#39;</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="go">before</span>
<span class="go">after</span>
</pre></div>
</div>
<p>The namespace will persist across multiple code chucks, Let’s define a variable:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">who</span> <span class="o">=</span> <span class="s2">&quot;World&quot;</span>
</pre></div>
</div>
<p>And now say hello:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Hello,&#39;</span><span class="p">,</span> <span class="n">who</span><span class="p">)</span>
<span class="go">Hello, World</span>
</pre></div>
</div>
<p>If the current section raises an exception, you can add the <code class="docutils literal notranslate"><span class="pre">:okexcept:</span></code> flag
to the current block, otherwise the build will fail.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ZeroDivisionError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="mf">9e1622</span><span class="n">b385b6</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>

<span class="ne">ZeroDivisionError</span>: division by zero
</pre></div>
</div>
<div class="section" id="ipython-sphinx-directive-module">
<h3>IPython Sphinx directive module<a class="headerlink" href="#ipython-sphinx-directive-module" title="Permalink to this headline">¶</a></h3>
<p>To enable this directive, simply list it in your Sphinx <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file
(making sure the directory where you placed it is visible to sphinx, as is
needed for all Sphinx directives). For example, to enable syntax highlighting
and the IPython directive:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;IPython.sphinxext.ipython_console_highlighting&#39;</span><span class="p">,</span>
              <span class="s1">&#39;IPython.sphinxext.ipython_directive&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The IPython directive outputs code-blocks with the language ‘ipython’. So
if you do not have the syntax highlighting extension enabled as well, then
all rendered code-blocks will be uncolored. By default this directive assumes
that your prompts are unchanged IPython ones, but this can be customized.
The configurable options that can be placed in conf.py are:</p>
<dl class="simple">
<dt>ipython_savefig_dir:</dt><dd><p>The directory in which to save the figures. This is relative to the
Sphinx source directory. The default is <code class="xref py py-obj docutils literal notranslate"><span class="pre">html_static_path</span></code>.</p>
</dd>
<dt>ipython_rgxin:</dt><dd><p>The compiled regular expression to denote the start of IPython input
lines. The default is <code class="docutils literal notranslate"><span class="pre">re.compile('In</span> <span class="pre">\[(\d+)\]:\s?(.*)\s*')</span></code>. You
shouldn’t need to change this.</p>
</dd>
<dt>ipython_rgxout:</dt><dd><p>The compiled regular expression to denote the start of IPython output
lines. The default is <code class="docutils literal notranslate"><span class="pre">re.compile('Out\[(\d+)\]:\s?(.*)\s*')</span></code>. You
shouldn’t need to change this.</p>
</dd>
<dt>ipython_warning_is_error:</dt><dd><p>[default to True]
Oh. This must be <code class="xref py py-data docutils literal notranslate"><span class="pre">block_parser.rgxin</span></code>. Wow.
Fail the build if something unexpected happen, for example if a block raise
an exception but does not have the <code class="xref py py-obj docutils literal notranslate"><span class="pre">:okexcept:</span></code> flag. The exact behavior of
what is considered strict, may change between the sphinx directive version.</p>
</dd>
</dl>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>ipython_warning_is_error</p>
<p>[Defaults to True]</p>
</div>
<dl class="simple">
<dt>ipython_promptin:</dt><dd><p>The string to represent the IPython input prompt in the generated rst.
The default is <code class="docutils literal notranslate"><span class="pre">'In</span> <span class="pre">[%d]:'</span></code>. This expects that the line numbers are used
in the prompt.</p>
</dd>
<dt>ipython_promptout:</dt><dd><p>The string to represent the IPython prompt in the generated rst. The
default is <code class="docutils literal notranslate"><span class="pre">'Out</span> <span class="pre">[%d]:'</span></code>. This expects that the line numbers are used
in the prompt.</p>
</dd>
<dt>ipython_mplbackend:</dt><dd><p>The string which specifies if the embedded Sphinx shell should import
Matplotlib and set the backend. The value specifies a backend that is
passed to <code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.use()</span></code> before any lines in <code class="xref py py-obj docutils literal notranslate"><span class="pre">ipython_execlines</span></code> are
executed. If not specified in conf.py, then the default value of ‘agg’ is
used. To use the IPython directive without matplotlib as a dependency, set
the value to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It may end up that matplotlib is still imported
if the user specifies so in <code class="xref py py-obj docutils literal notranslate"><span class="pre">ipython_execlines</span></code> or makes use of the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">&#64;savefig</span></code> pseudo decorator.</p>
</div>
<dl>
<dt>ipython_execlines:</dt><dd><p>A list of strings to be exec’d in the embedded Sphinx shell. Typical
usage is to make certain packages always available. Set this to an empty
list if you wish to have no imports always available. If specified in
<code class="docutils literal notranslate"><span class="pre">conf.py</span></code> as <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, then it has the effect of making no imports available.</p>
<p>If omitted from conf.py altogether, then the default value of:</p>
<blockquote>
<div><p>[‘import numpy as np’, ‘import matplotlib.pyplot as plt’]</p>
</div></blockquote>
<p>is used.</p>
</dd>
<dt>ipython_holdcount</dt><dd><p>When the <code class="xref py py-obj docutils literal notranslate"><span class="pre">&#64;suppress</span></code> pseudo-decorator is used, the execution count can be
incremented or not. The default behavior is to hold the execution count,
corresponding to a value of <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. Set this to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> to increment
the execution count after each suppressed command.</p>
</dd>
</dl>
<p>As an example, to use the IPython directive when <code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code> is not available,
one sets the backend to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">ipython_mplbackend</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>
</div>
<p>An example usage of the directive is:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">ipython</span><span class="p">::</span>

    In [1]: x = 1

    In [2]: y = x**2

    In [3]: print(y)
</pre></div>
</div>
<p>See <a class="reference external" href="http://matplotlib.org/sampledoc/ipython_directive.html">http://matplotlib.org/sampledoc/ipython_directive.html</a> for additional
documentation.</p>
</div>
<div class="section" id="pseudo-decorators">
<h3>Pseudo-Decorators<a class="headerlink" href="#pseudo-decorators" title="Permalink to this headline">¶</a></h3>
<p>Note: Only one decorator is supported per input. If more than one decorator
is specified, then only the last one is used.</p>
<p>In addition to the Pseudo-Decorators/options described at the above link,
several enhancements have been made. The directive will emit a message to the
console at build-time if code-execution resulted in an exception or warning.
You can suppress these on a per-block basis by specifying the :okexcept:
or :okwarning: options:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">ipython</span><span class="p">::</span>
    <span class="nc">:okexcept:</span>
    <span class="nc">:okwarning:</span>

    In [1]: 1/0
    In [2]: # raise warning.
</pre></div>
</div>
<p>Now also contains a method for documenting traits.</p>
<dl class="class">
<dt id="default_profile.sphinxext.ipython_directive.TokenizedBlocks">
<em class="property">class </em><code class="sig-name descname">TokenizedBlocks</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#TokenizedBlocks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.TokenizedBlocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>TokenizedBlocks(enum.Enum).</p>
<p>Subclasses the Enumeration class to create distinct global values.</p>
<dl class="simple">
<dt>COMMENT<span class="classifier">str</span></dt><dd><p>The comment string.</p>
</dd>
<dt>INPUT<span class="classifier">?</span></dt><dd><dl class="simple">
<dt>the (DECORATOR, INPUT_LINE, REST) where</dt><dd><p>DECORATOR: the input decorator (or None)
INPUT_LINE: the input as string (possibly multi-line)
REST : any stdout generated by the input line (not OUTPUT)</p>
</dd>
</dl>
</dd>
<dt>OUTPUT<span class="classifier">str</span></dt><dd><p>The output string, possibly multi-line.</p>
</dd>
</dl>
<p>Why was this in the <a class="reference internal" href="#default_profile.sphinxext.ipython_directive.block_parser" title="default_profile.sphinxext.ipython_directive.block_parser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_parser</span></code></a> docstring?</p>
<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.TokenizedBlocks.COMMENT">
<code class="sig-name descname">COMMENT</code><em class="property"> = 0</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.TokenizedBlocks.COMMENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.TokenizedBlocks.INPUT">
<code class="sig-name descname">INPUT</code><em class="property"> = 1</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.TokenizedBlocks.INPUT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.TokenizedBlocks.OUTPUT">
<code class="sig-name descname">OUTPUT</code><em class="property"> = 2</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.TokenizedBlocks.OUTPUT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="default_profile.sphinxext.ipython_directive.block_parser">
<code class="sig-name descname">block_parser</code><span class="sig-paren">(</span><em class="sig-param">part</em>, <em class="sig-param">rgxin</em>, <em class="sig-param">rgxout</em>, <em class="sig-param">fmtin</em>, <em class="sig-param">fmtout</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#block_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.block_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>A parser for rst documents and IPython source code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>part</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A string of IPython text, comprised of at most one input,
one output, comments, and blank lines.</p></li>
<li><p><strong>rgxin</strong> (probably an <code class="xref py py-class docutils literal notranslate"><span class="pre">re.Pattern</span></code> of some kind from <a class="reference external" href="https://docs.python.org/3/library/re.html#module-re" title="(in Python v3.8)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a>.) – </p></li>
<li><p><strong>rgxout</strong> (<em>wasn't documented. Actally I think it's those ipython_rgx* params</em>) – </p></li>
<li><p><strong>fmtin</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>blocks</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of 2 element tuples</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The block parser parses the text into a list of 2-element tuples. I.E.:</p>
<blockquote>
<div><p>blocks = [ (TOKEN0, data0), (TOKEN1, data1), …]</p>
</div></blockquote>
<p>where <em>TOKEN</em> is one of the attributes of <a class="reference internal" href="#default_profile.sphinxext.ipython_directive.TokenizedBlocks" title="default_profile.sphinxext.ipython_directive.TokenizedBlocks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TokenizedBlocks</span></code></a>, namely
<code class="xref py py-attr docutils literal notranslate"><span class="pre">COMMENT</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">INPUT</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">OUTPUT</span></code>.</p>
</dd></dl>

<dl class="class">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell">
<em class="property">class </em><code class="sig-name descname">EmbeddedSphinxShell</code><span class="sig-paren">(</span><em class="sig-param">exec_lines=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>An embedded IPython instance to run inside Sphinx.</p>
<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.cout">
<code class="sig-name descname">cout</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.cout" title="Permalink to this definition">¶</a></dt>
<dd><p>Idk.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.StringIO</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.IP">
<code class="sig-name descname">IP</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.IP" title="Permalink to this definition">¶</a></dt>
<dd><p>Global IPython instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">IPython.InteractiveShell</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.user_ns">
<code class="sig-name descname">user_ns</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.user_ns" title="Permalink to this definition">¶</a></dt>
<dd><p>I think it’s a dict</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.user_global_ns">
<code class="sig-name descname">user_global_ns</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.user_global_ns" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.tmp_profile_dir">
<code class="sig-name descname">tmp_profile_dir</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.tmp_profile_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return value of <a class="reference external" href="https://docs.python.org/3/library/tempfile.html#tempfile.mkdtemp" title="(in Python v3.8)"><code class="xref py py-func docutils literal notranslate"><span class="pre">tempfile.mkdtemp()</span></code></a>.
Why not use a <code class="xref py py-class docutils literal notranslate"><span class="pre">tempfile.TemporaryDirectory</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.directive">
<code class="sig-name descname">directive</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.directive" title="Permalink to this definition">¶</a></dt>
<dd><p>Optionally, provide more detailed information to shell.
this is assigned by the setup method of the IPython Directive
to point at itself.
So, you can access handy things at self.directive.state.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>?</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">_pyplot_imported = False</code></dt>
<dd><p>On the first call to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">&#64;savefig</span></code> decorator, we’ll import
<a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" title="(in Matplotlib v3.1.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code></a> as plt so we can make a call to the
plt.gcf().savefig.</p>
</dd></dl>

<p>Initialize the <em>EmbeddedSphinxShell</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exec_lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><em>Optional</em>) – Lines to execute on startup.</p>
</dd>
</dl>
<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">exec_lines=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the <em>EmbeddedSphinxShell</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exec_lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><em>Optional</em>) – Lines to execute on startup.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Teardown function that removes <a class="reference internal" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.tmp_profile_dir" title="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.tmp_profile_dir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">tmp_profile_dir</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.clear_cout">
<code class="sig-name descname">clear_cout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.clear_cout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.clear_cout" title="Permalink to this definition">¶</a></dt>
<dd><p>Method of StringIO that calls seek and truncate? Idk.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_input_line">
<code class="sig-name descname">process_input_line</code><span class="sig-paren">(</span><em class="sig-param">line</em>, <em class="sig-param">store_history</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_input_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_input_line" title="Permalink to this definition">¶</a></dt>
<dd><p>An unnecessary method that calls process_input_lines.</p>
<p>Refer to ‘process_input_lines’ for signature.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_input_lines">
<code class="sig-name descname">process_input_lines</code><span class="sig-paren">(</span><em class="sig-param">lines</em>, <em class="sig-param">store_history=True</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_input_lines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_input_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the input, capturing <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.stdout" title="(in Python v3.8)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_image">
<code class="sig-name descname">process_image</code><span class="sig-paren">(</span><em class="sig-param">decorator</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the image directive.</p>
<p>Build out an image directive like the following for example.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">image</span><span class="p">::</span> somefile.png
    <span class="nc">:width:</span> <span class="nf">4in</span>
</pre></div>
</div>
<p>With an additional option like.</p>
<p>But literally why does this exist? Doesn’t sphinx natively handle this?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>decorator</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Honestly I’m not sure but I feel like it should be a bool
indicating whether the <code class="xref py py-obj docutils literal notranslate"><span class="pre">&#64;savefig</span></code> decorator was used.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.status">
<em class="property">static </em><code class="sig-name descname">status</code><span class="sig-paren">(</span><em class="sig-param">output</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Print output in bold.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_input">
<code class="sig-name descname">process_input</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">input_prompt</em>, <em class="sig-param">lineno</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Process data block for INPUT token.</p>
<p>Callbacks for each type of token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list?</em>) – <p>Unpacked to decorator, input, rest. Note no star?</p>
<p># The “rest” is the standard output of the input. This needs to be
# added when in verbatim mode. If there is no “rest”, then we don’t
# add it, as the new line will be added by the processed output.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_output">
<code class="sig-name descname">process_output</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">output_prompt</em>, <em class="sig-param">input_lines</em>, <em class="sig-param">output</em>, <em class="sig-param">is_doctest</em>, <em class="sig-param">decorator</em>, <em class="sig-param">image_file</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Process data block for OUTPUT token.</p>
<p>Recall: <code class="xref py py-obj docutils literal notranslate"><span class="pre">data</span></code> is the submitted output, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">output</span></code> is the processed
output from <code class="xref py py-obj docutils literal notranslate"><span class="pre">input_lines</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_comment">
<code class="sig-name descname">process_comment</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Process data fPblock for COMMENT token.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.save_image">
<code class="sig-name descname">save_image</code><span class="sig-paren">(</span><em class="sig-param">image_file</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.save_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.save_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the image file to disk.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_block">
<code class="sig-name descname">process_block</code><span class="sig-paren">(</span><em class="sig-param">block</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_block"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Process block from the block_parser and return a list of processed lines.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.ensure_pyplot">
<code class="sig-name descname">ensure_pyplot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.ensure_pyplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.ensure_pyplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that pyplot has been imported into the embedded IPython shell.</p>
<p>Also, makes sure to set the backend appropriately if not set already.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>something with this function because it crashes the doc build all the time</p>
</div>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_pure_python">
<code class="sig-name descname">process_pure_python</code><span class="sig-paren">(</span><em class="sig-param">content</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_pure_python"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.process_pure_python" title="Permalink to this definition">¶</a></dt>
<dd><p>Content is a list of strings. It is unedited directive content.</p>
<p>This runs it line by line in the InteractiveShell, prepends
prompts as needed capturing stderr and stdout, then returns
the content as a list as if it were IPython code.</p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>cyclomatic complexity is 17.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.custom_doctest">
<code class="sig-name descname">custom_doctest</code><span class="sig-paren">(</span><em class="sig-param">decorator</em>, <em class="sig-param">input_lines</em>, <em class="sig-param">found</em>, <em class="sig-param">submitted</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.custom_doctest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.custom_doctest" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a specialized doctest.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective">
<em class="property">class </em><code class="sig-name descname">IPythonDirective</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#IPythonDirective"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sphinx.util.docutils.SphinxDirective</span></code></p>
<p>Add an init method to this class.</p>
<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.has_content">
<code class="sig-name descname">has_content</code><em class="property"> = True</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.has_content" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.required_arguments">
<code class="sig-name descname">required_arguments</code><em class="property"> = 0</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.required_arguments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.optional_arguments">
<code class="sig-name descname">optional_arguments</code><em class="property"> = 4</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.optional_arguments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.final_argumuent_whitespace">
<code class="sig-name descname">final_argumuent_whitespace</code><em class="property"> = True</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.final_argumuent_whitespace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.option_spec">
<code class="sig-name descname">option_spec</code><em class="property"> = {'doctest': &lt;function flag&gt;, 'okexcept': &lt;function flag&gt;, 'okwarning': &lt;function flag&gt;, 'python': &lt;function unchanged&gt;, 'suppress': &lt;function flag&gt;, 'verbatim': &lt;function flag&gt;}</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.option_spec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.shell">
<code class="sig-name descname">shell</code><em class="property"> = None</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.shell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.seen_docs">
<code class="sig-name descname">seen_docs</code><em class="property"> = {}</em><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.seen_docs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#IPythonDirective.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an init method to this class.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.get_config_options">
<code class="sig-name descname">get_config_options</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#IPythonDirective.get_config_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.get_config_options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.setup">
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#IPythonDirective.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Get configuration values.</p>
</dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.teardown">
<code class="sig-name descname">teardown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#IPythonDirective.teardown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.teardown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="default_profile.sphinxext.ipython_directive.IPythonDirective.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#IPythonDirective.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.IPythonDirective.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="default_profile.sphinxext.ipython_directive.setup">
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><em class="sig-param">app: Sphinx</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#default_profile.sphinxext.ipython_directive.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable as a proper Sphinx directive.</p>
<p>Add config values using the Sphinx api. Alternatively,
I think we can add these into the namespace using docutils and their
<code class="xref py py-obj docutils literal notranslate"><span class="pre">directives</span></code>.</p>
<p>Also add typing support.</p>
</dd></dl>

</div>
<p>In addition, here’s the longest comment ever. This info totally qualifies
for inclusion in the documentation IMO and I don’t know why it’s only
a side-note.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">EmbeddedSphinxShell</code><span class="sig-paren">(</span><em class="sig-param">exec_lines=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>An embedded IPython instance to run inside Sphinx.</p>
<dl class="attribute">
<dt>
<code class="sig-name descname">cout</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Idk.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.StringIO</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">IP</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Global IPython instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">IPython.InteractiveShell</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">user_ns</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>I think it’s a dict</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">user_global_ns</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">tmp_profile_dir</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return value of <a class="reference external" href="https://docs.python.org/3/library/tempfile.html#tempfile.mkdtemp" title="(in Python v3.8)"><code class="xref py py-func docutils literal notranslate"><span class="pre">tempfile.mkdtemp()</span></code></a>.
Why not use a <code class="xref py py-class docutils literal notranslate"><span class="pre">tempfile.TemporaryDirectory</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">directive</code><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Optionally, provide more detailed information to shell.
this is assigned by the setup method of the IPython Directive
to point at itself.
So, you can access handy things at self.directive.state.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>?</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">_pyplot_imported = False</code></dt>
<dd><p>On the first call to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">&#64;savefig</span></code> decorator, we’ll import
<a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" title="(in Matplotlib v3.1.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code></a> as plt so we can make a call to the
plt.gcf().savefig.</p>
</dd></dl>

<p>Initialize the <em>EmbeddedSphinxShell</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exec_lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><em>Optional</em>) – Lines to execute on startup.</p>
</dd>
</dl>
<dl class="method">
<dt>
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">exec_lines=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Initialize the <em>EmbeddedSphinxShell</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exec_lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><em>Optional</em>) – Lines to execute on startup.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.cleanup"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Teardown function that removes <a class="reference internal" href="#default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.tmp_profile_dir" title="default_profile.sphinxext.ipython_directive.EmbeddedSphinxShell.tmp_profile_dir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">tmp_profile_dir</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">clear_cout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.clear_cout"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Method of StringIO that calls seek and truncate? Idk.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">process_input_line</code><span class="sig-paren">(</span><em class="sig-param">line</em>, <em class="sig-param">store_history</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_input_line"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>An unnecessary method that calls process_input_lines.</p>
<p>Refer to ‘process_input_lines’ for signature.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">process_input_lines</code><span class="sig-paren">(</span><em class="sig-param">lines</em>, <em class="sig-param">store_history=True</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_input_lines"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Process the input, capturing <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.stdout" title="(in Python v3.8)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">process_image</code><span class="sig-paren">(</span><em class="sig-param">decorator</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_image"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Processes the image directive.</p>
<p>Build out an image directive like the following for example.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">image</span><span class="p">::</span> somefile.png
    <span class="nc">:width:</span> <span class="nf">4in</span>
</pre></div>
</div>
<p>With an additional option like.</p>
<p>But literally why does this exist? Doesn’t sphinx natively handle this?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>decorator</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Honestly I’m not sure but I feel like it should be a bool
indicating whether the <code class="xref py py-obj docutils literal notranslate"><span class="pre">&#64;savefig</span></code> decorator was used.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">static </em><code class="sig-name descname">status</code><span class="sig-paren">(</span><em class="sig-param">output</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.status"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Print output in bold.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">process_input</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">input_prompt</em>, <em class="sig-param">lineno</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_input"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Process data block for INPUT token.</p>
<p>Callbacks for each type of token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list?</em>) – <p>Unpacked to decorator, input, rest. Note no star?</p>
<p># The “rest” is the standard output of the input. This needs to be
# added when in verbatim mode. If there is no “rest”, then we don’t
# add it, as the new line will be added by the processed output.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">process_output</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">output_prompt</em>, <em class="sig-param">input_lines</em>, <em class="sig-param">output</em>, <em class="sig-param">is_doctest</em>, <em class="sig-param">decorator</em>, <em class="sig-param">image_file</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_output"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Process data block for OUTPUT token.</p>
<p>Recall: <code class="xref py py-obj docutils literal notranslate"><span class="pre">data</span></code> is the submitted output, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">output</span></code> is the processed
output from <code class="xref py py-obj docutils literal notranslate"><span class="pre">input_lines</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">process_comment</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_comment"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Process data fPblock for COMMENT token.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">save_image</code><span class="sig-paren">(</span><em class="sig-param">image_file</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.save_image"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Save the image file to disk.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">process_block</code><span class="sig-paren">(</span><em class="sig-param">block</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_block"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Process block from the block_parser and return a list of processed lines.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">ensure_pyplot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.ensure_pyplot"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Ensure that pyplot has been imported into the embedded IPython shell.</p>
<p>Also, makes sure to set the backend appropriately if not set already.</p>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>something with this function because it crashes the doc build all the time</p>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">process_pure_python</code><span class="sig-paren">(</span><em class="sig-param">content</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.process_pure_python"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Content is a list of strings. It is unedited directive content.</p>
<p>This runs it line by line in the InteractiveShell, prepends
prompts as needed capturing stderr and stdout, then returns
the content as a list as if it were IPython code.</p>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<p>cyclomatic complexity is 17.</p>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">custom_doctest</code><span class="sig-paren">(</span><em class="sig-param">decorator</em>, <em class="sig-param">input_lines</em>, <em class="sig-param">found</em>, <em class="sig-param">submitted</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/farisachugthai/dynamic_ipython/default_profile/sphinxext/ipython_directive.py"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../_modules/default_profile/sphinxext/ipython_directive.html#EmbeddedSphinxShell.custom_doctest"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Perform a specialized doctest.</p>
</dd></dl>

</dd></dl>

<p>In <code class="xref py py-func docutils literal notranslate"><span class="pre">EmbeddedSphinxShell.run()</span></code>, the elements of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ret</span></code> are eventually
combined such that ‘’ entries correspond to newlines. So if
<code class="xref py py-obj docutils literal notranslate"><span class="pre">processed_output</span></code> is equal to ‘’, then the adding it to <code class="xref py py-obj docutils literal notranslate"><span class="pre">ret</span></code>
ensures that there is a blank line between consecutive inputs
that have no outputs, as in:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">x</span> <span class="o">=</span> <span class="mi">4</span>

<span class="gp">In [2]: </span><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
<p>When there is processed output, it has a ‘n’ at the tail end. So
adding the output to <code class="xref py py-obj docutils literal notranslate"><span class="pre">ret</span></code> will provide the necessary spacing
between consecutive input/output blocks, as in:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">x</span>
<span class="gh">Out[1]: </span><span class="go">5</span>

<span class="gp">In [2]: </span><span class="n">x</span>
<span class="gh">Out[2]: </span><span class="go">5</span>
</pre></div>
</div>
<p>When there is <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.stdout" title="(in Python v3.8)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> from the input, it also has a ‘n’ at the
tail end, and so this ensures proper spacing as well. E.g.:</p>
<blockquote>
<div><p>In [1]: print x
5</p>
<p>In [2]: x = 5</p>
</div></blockquote>
<p>When in verbatim mode, <code class="xref py py-obj docutils literal notranslate"><span class="pre">processed_output</span></code> is empty (because
nothing was passed to <code class="xref py py-obj docutils literal notranslate"><span class="pre">IP</span></code>. Sometimes the submitted code block has
an <code class="docutils literal notranslate"><span class="pre">Out[]</span></code> portion and sometimes it does not.</p>
<p>When it does not, we need to ensure proper spacing, so we have to add
<kbd class="kbd docutils literal notranslate">''</kbd> to <code class="xref py py-obj docutils literal notranslate"><span class="pre">ret</span></code>.</p>
<p>However, if there is an <code class="docutils literal notranslate"><span class="pre">Out[]</span></code> in the submitted code, then we do
not want to add a newline as <code class="xref py py-obj docutils literal notranslate"><span class="pre">process_output</span></code> has stuff to add.
The difficulty is that <code class="xref py py-obj docutils literal notranslate"><span class="pre">process_input</span></code> doesn’t know if
<code class="xref py py-obj docutils literal notranslate"><span class="pre">process_output</span></code> will be called—so it doesn’t know if there is
Out[] in the code block. The requires that we include a hack in
<code class="xref py py-obj docutils literal notranslate"><span class="pre">process_block</span></code>. See the comments there.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
    <h3>Quick search</h3>
    <div class="searchformwrapper">
        <form class="search" action="../search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
        </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>


<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a>
    <ul>
      <li><a href="index.html">Sphinx extensions</a>
        <ul>
          <li>Previous: <a href="lexer.html" title="previous chapter">New IPython Console Lexer</a></li>
          <li>Next: <a href="custom_doctests.html" title="next chapter">Custom Doctests</a></li>
        </ul>
      </li>
    </ul>
</ul>
</li>


<h3><a href="../index.html">Table of Contents</a></h3>
<div>&nbsp;</div>
<div id="sidebartoc">
    <p class="caption"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../jobcontrol.html">Job Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subcommands.html">Subcommands</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Sphinx Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev.html">Developers Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../startup/index.html">IPython Startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../util/index.html">IPython Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel.html">IPython Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/index.html">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">Extensions</a></li>
</ul>

    
</div>

<div role="note" aria-label="source link">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/sphinxext/sphinx_api_docs.rst.txt" rel="nofollow">Show Source</a></li>
  </ul>
</div>

<h3><a href="../index.html">On This Page:</a></h3>

<div>&nbsp;</div>

<div id="sidebartoc">

    <ul>
<li><a class="reference internal" href="#">Sphinx API docs</a><ul>
<li><a class="reference internal" href="#module-IPython.sphinxext">Sphinx Package</a></li>
<li><a class="reference internal" href="#module-default_profile.sphinxext.ipython_directive">Package submodules</a><ul>
<li><a class="reference internal" href="#ipython-sphinx-directive-module">IPython Sphinx directive module</a></li>
<li><a class="reference internal" href="#pseudo-decorators">Pseudo-Decorators</a></li>
</ul>
</li>
</ul>
</li>
</ul>


</div>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="custom_doctests.html" title="Custom Doctests"
             >next</a> |</li>
        <li class="right" >
          <a href="lexer.html" title="New IPython Console Lexer"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Dynamic IPython</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Sphinx extensions</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
      Last updated on Oct 18, 2019.
    </div>
  </body>
</html>