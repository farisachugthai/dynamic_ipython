
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>50_sysexception &#8212; Dynamic IPython 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Dynamic IPython 0.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for 50_sysexception</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Give a detailed, colored traceback and drop into pdb on exceptions.</span>

<span class="sd">=====================</span>
<span class="sd">Customized Exceptions</span>
<span class="sd">=====================</span>

<span class="sd">.. module:: 50_sysexception</span>
<span class="sd">   :synopsis: Specify a handler for IPython&#39;s traceback formatting.</span>

<span class="sd">.. versionchanged:: 06/30/2019: Testing out</span>
<span class="sd">                    :class:`~IPython.core.ultratb.AutoFormattedTb()`</span>


<span class="sd">This is excessively long but look at how cute and personal this</span>
<span class="sd">help doc is for :ref:`IPython.core.ultratb`!!:</span>


<span class="sd">Help on module IPython.core.ultratb in IPython.core:</span>
<span class="sd">====================================================</span>

<span class="sd">NAME</span>
<span class="sd">    IPython.core.ultratb - Verbose and colourful traceback formatting.</span>

<span class="sd">DESCRIPTION</span>
<span class="sd">    **ColorTB**</span>

<span class="sd">    I&#39;ve always found it a bit hard to visually parse tracebacks in Python.  The</span>
<span class="sd">    ColorTB class is a solution to that problem.  It colors the different parts of a</span>
<span class="sd">    traceback in a manner similar to what you would expect from a syntax-highlighting</span>
<span class="sd">    text editor.</span>

<span class="sd">    Installation instructions for ColorTB::</span>

<span class="sd">        import sys,ultratb</span>
<span class="sd">        sys.excepthook = ultratb.ColorTB()</span>

<span class="sd">    **VerboseTB**</span>

<span class="sd">    I&#39;ve also included a port of Ka-Ping Yee&#39;s &quot;cgitb.py&quot; that produces all kinds</span>
<span class="sd">    of useful info when a traceback occurs.  Ping originally had it spit out HTML</span>
<span class="sd">    and intended it for CGI programmers, but why should they have all the fun?  I</span>
<span class="sd">    altered it to spit out colored text to the terminal.  It&#39;s a bit overwhelming,</span>
<span class="sd">    but kind of neat, and maybe useful for long-running programs that you believe</span>
<span class="sd">    are bug-free.  If a crash *does* occur in that type of program you want details.</span>
<span class="sd">    Give it a shot--you&#39;ll love it or you&#39;ll hate it.</span>

<span class="sd">    .. note::</span>

<span class="sd">      The Verbose mode prints the variables currently visible where the exception</span>
<span class="sd">      happened (shortening their strings if too long). This can potentially be</span>
<span class="sd">      very slow, if you happen to have a huge data structure whose string</span>
<span class="sd">      representation is complex to compute. Your computer may appear to freeze for</span>
<span class="sd">      a while with cpu usage at 100%. If this occurs, you can cancel the traceback</span>
<span class="sd">      with Ctrl-C (maybe hitting it more than once).</span>

<span class="sd">      If you encounter this kind of situation often, you may want to use the</span>
<span class="sd">      Verbose_novars mode instead of the regular Verbose, which avoids formatting</span>
<span class="sd">      variables (but otherwise includes the information and context given by</span>
<span class="sd">      Verbose).</span>

<span class="sd">    .. note::</span>

<span class="sd">      The verbose mode print all variables in the stack, which means it can</span>
<span class="sd">      potentially leak sensitive information like access keys, or unencryted</span>
<span class="sd">      password.</span>

<span class="sd">    Installation instructions for VerboseTB::</span>

<span class="sd">        import sys,ultratb</span>
<span class="sd">        sys.excepthook = ultratb.VerboseTB()</span>

<span class="sd">    Note:  Much of the code in this module was lifted verbatim from the standard</span>
<span class="sd">    library module &#39;traceback.py&#39; and Ka-Ping Yee&#39;s &#39;cgitb.py&#39;.</span>

<span class="sd">----------</span>

<span class="sd">This guy was even so kind as to give us a full explanation for the color</span>
<span class="sd">schemes! I never saw anything this thorough in the official docs so that&#39;s</span>
<span class="sd">really cool.:</span>

<span class="sd">    Color schemes</span>
<span class="sd">    -------------</span>

<span class="sd">    The colors are defined in the class TBTools through the use of the</span>
<span class="sd">    ColorSchemeTable class. Currently the following exist:</span>

<span class="sd">      - NoColor: allows all of this module to be used in any terminal (the color</span>
<span class="sd">        escapes are just dummy blank strings).</span>

<span class="sd">      - Linux: is meant to look good in a terminal like the Linux console (black</span>
<span class="sd">        or very dark background).</span>

<span class="sd">      - LightBG: similar to Linux but swaps dark/light colors to be more readable</span>
<span class="sd">        in light background terminals.</span>

<span class="sd">      - Neutral: a neutral color scheme that should be readable on both light and</span>
<span class="sd">        dark background</span>

<span class="sd">    You can implement other color schemes easily, the syntax is fairly</span>
<span class="sd">    self-explanatory. Please send back new schemes you develop to the author for</span>
<span class="sd">    possible inclusion in future releases.</span>

<span class="sd">    Inheritance diagram:</span>

<span class="sd">    .. inheritance-diagram:: IPython.core.ultratb</span>
<span class="sd">       :parts: 3</span>


<span class="sd">FUNCTIONS</span>
<span class="sd">    eqrepr(value, repr=&lt;function text_repr at 0x742c827ae8&gt;)</span>

<span class="sd">    find_recursion(etype, value, records)</span>
<span class="sd">        Identify the repeating stack frames from a RecursionError traceback</span>

<span class="sd">        &#39;records&#39; is a list as returned by VerboseTB.get_records()</span>

<span class="sd">        Returns (last_unique, repeat_length)</span>

<span class="sd">    findsource(object)</span>
<span class="sd">        Return the entire source file and starting line number for an object.</span>

<span class="sd">        The argument may be a module, class, method, function, traceback, frame,</span>
<span class="sd">        or code object.  The source code is returned as a list of all the lines</span>
<span class="sd">        in the file and the line number indexes a line in that list.  An IOError</span>
<span class="sd">        is raised if the source code cannot be retrieved.</span>

<span class="sd">        FIXED version with which we monkeypatch the stdlib to work around a bug.</span>

<span class="sd">    fix_frame_records_filenames(records)</span>
<span class="sd">        Try to fix the filenames in each record from inspect.getinnerframes().</span>

<span class="sd">        Particularly, modules loaded from within zip files have useless filenames</span>
<span class="sd">        attached to their code object, and inspect.getinnerframes() just uses it.</span>

<span class="sd">    getargs(co)</span>
<span class="sd">        Get information about the arguments accepted by a code object.</span>

<span class="sd">        Three things are returned: (args, varargs, varkw), where &#39;args&#39; is</span>
<span class="sd">        a list of argument names (possibly containing nested lists), and</span>
<span class="sd">        &#39;varargs&#39; and &#39;varkw&#39; are the names of the * and ** arguments or None.</span>

<span class="sd">    inspect_error()</span>
<span class="sd">        Print a message about internal inspect errors.</span>

<span class="sd">        These are unfortunately quite common.</span>

<span class="sd">    is_recursion_error(etype, value, records)</span>

<span class="sd">    nullrepr(value, repr=&lt;function text_repr at 0x742c827ae8&gt;)</span>

<span class="sd">    text_repr(value)</span>
<span class="sd">        Hopefully pretty robust repr equivalent.</span>

<span class="sd">    with_patch_inspect(f)</span>
<span class="sd">        Deprecated since IPython 6.0</span>
<span class="sd">        decorator for monkeypatching inspect.findsource</span>

<span class="sd">DATA</span>
<span class="sd">    DEFAULT_SCHEME = &#39;NoColor&#39;</span>
<span class="sd">    INDENT_SIZE = 8</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">IPython.core</span> <span class="k">import</span> <span class="n">ultratb</span>


<div class="viewcode-block" id="ExceptionHook"><a class="viewcode-back" href="../profile_default.html#50_sysexception.ExceptionHook">[docs]</a><span class="k">class</span> <span class="nc">ExceptionHook</span><span class="p">(</span><span class="ne">BaseException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Custom exception hook for IPython.</span>

<span class="sd">    From the IPython official documentation:</span>

<span class="sd">    Print out a formatted exception traceback.</span>

<span class="sd">        Optional arguments:</span>
<span class="sd">          - out: an open file-like object to direct output to.</span>

<span class="sd">          - tb_offset: the number of frames to skip over in the stack, on a</span>
<span class="sd">          per-call basis (this overrides temporarily the instance&#39;s tb_offset</span>
<span class="sd">          given at initialization time.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    *args, **kwargs : The least useful call signature</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    IPython.core.ultratb.FormattedTB</span>
<span class="sd">        Displays all accepted keyword arguments.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">instance</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="n">ultratb</span><span class="o">.</span><span class="n">AutoFormattedTB</span><span class="p">(</span>
                <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;Context&#39;</span><span class="p">,</span>
                <span class="n">color_scheme</span><span class="o">=</span><span class="s1">&#39;Linux&#39;</span><span class="p">,</span>
                <span class="n">call_pdb</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">ostream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<span class="n">sys</span><span class="o">.</span><span class="n">excepthook</span> <span class="o">=</span> <span class="n">ExceptionHook</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../startup.html">Startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ipython_keybindings.html">Keybindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../magics.html">Built-in Magics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../custom_magics.html">Writing Your Own Magics</a></li>
</ul>
<p class="caption"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../profile_default.html">Startup Files and IPython Shell Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter.html">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter.html#jupyter-qtconsole-jupyter-qtconsole-config">Jupyter QTConsole — <code class="xref py py-mod docutils literal notranslate"><span class="pre">jupyter_qtconsole_config</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter.html#jupyter-notebook-jupyter-conf-jupyter-notebook-config">Jupyter Notebook — <code class="xref py py-mod docutils literal notranslate"><span class="pre">jupyter_conf.jupyter_notebook_config</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter.html#jupyter-console-config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">jupyter_console_config</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">IPython Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev.html">Developers Notes</a></li>
</ul>


 Vim: set ft=htmljinja:
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Dynamic IPython 0.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright (C) 2018-2019 Faris Chugthai.
    </div>
  </body>
</html>