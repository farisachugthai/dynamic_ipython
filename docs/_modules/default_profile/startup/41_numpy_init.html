
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>default_profile.startup.41_numpy_init &#8212; Dynamic IPython: version0.0.2</title>
    
    <link rel="stylesheet" href="../../../_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/copybutton.js"></script>
    <script type="text/javascript" src="../../../_static/theme_extras.js"></script>
    <link rel="canonical" href="https://farisachugthai.github.io/dynamic-ipython/_modules/default_profile/startup/41_numpy_init.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<!-- <link charset="utf-8" href="https://fonts.googleapis.com/css?family=Source+Code+Pro" media="screen" rel="stylesheet" type="text/css" /> -->
<!-- <link charset="utf-8" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:regular,italic,bold,bolditalic" media="screen" rel="stylesheet" type="text/css" /> -->
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>Floating label Demo</title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style type="text/css">
    /* CSS styles */
    /* Example by Matthias Benkort at http://codepen.io/KtorZ/pen/ZOzdqG */
    @import url(
      https://fonts.googleapis.com/css?family=Roboto:400,
      300,
      500,
      700
    );
    .wrapper {
      align-items: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .material-textfield {
      display: inline-block;
      height: 4rem;
      padding-top: 2rem;
    }
    .material-textfield input {
      background: none;
      border: none;
      box-sizing: border-box;
      display: block;
      font-family: Roboto, Arial, sans-serif;
      font-size: 1rem;
      padding: 0.25rem 0.1rem;
      width: 100%;
    }
    .material-textfield input:invalid {
      box-shadow: none;
    }
    .material-textfield input:focus {
      outline: none;
    }
    .material-textfield label {
      display: inline-block;
      font-family: Roboto, Arial, sans-serif;
      font-size: 0;
      pointer-events: none;
      position: relative;
      text-transform: uppercase;
      width: 100%;
    }
    .material-textfield label::before {
      content: attr(data-content);
      position: relative;
      transition: all 0.2s ease;
      will-change: font-size, top;
    }
    .material-textfield label::after {
      bottom: 0.9rem;
      content: "";
      height: 0.3rem;
      left: 50%;
      position: absolute;
      transition: all 0.2s ease;
      width: 0;
      will-change: width, left;
    }
    .material-textfield label::before,
    .material-textfield input[required]:focus ~ label::before {
      font-size: 0.75rem;
      top: -3.25rem;
    }
    .material-textfield input:focus ~ label::after {
      left: 0%;
      width: 100%;
    }
    .material-textfield input:invalid ~ label::before {
      font-size: 1rem;
      top: -2rem;
    }

    .material-textfield.blue input {
      border-bottom: 0.1rem solid #03a9f4;
      color: #0275a8;
    }
    .material-textfield.blue label::after {
      background: #03a9f4;
    }
    .material-textfield.blue label::before,
    .material-textfield.blue input[required]:focus ~ label::before {
      color: #47c4fd;
    }
    .material-textfield.blue input:invalid ~ label::before {
      color: #03a9f4;
    }

    .material-textfield.red input {
      border-bottom: 0.1rem solid #f44336;
      color: #d2190b;
    }
    .material-textfield.red label::after {
      background: #f44336;
    }
    .material-textfield.red label::before,
    .material-textfield.red input[required]:focus ~ label::before {
      color: #f8877f;
    }
    .material-textfield.red input:invalid ~ label::before {
      color: #f44336;
    }
  </style>
</head>

  </head><body> 
    <div id="content">
      <div class="header">
        <h1 class="heading"><a href="../../../index.html"
          title="back to the documentation overview"><span>default_profile.startup.41_numpy_init</span></a></h1>
      </div>
      <div class="relnav" role="navigation" aria-label="related navigation">
        <a href="#">default_profile.startup.41_numpy_init</a>
      </div>
      <div id="contentwrapper">
        <div role="main">
        
<h1>Source code for default_profile.startup.41_numpy_init</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Set printing options.</span>

<span class="sd">These options determine the way floating point numbers, arrays and</span>
<span class="sd">other NumPy objects are displayed.::</span>

<span class="sd">   numpy.set_printoptions = set_printoptions(</span>
<span class="sd">       precision=None, threshold=None, edgeitems=None, linewidth=None,</span>
<span class="sd">       suppress=None, nanstr=None, infstr=None, formatter=None, sign=None,</span>
<span class="sd">       floatmode=None, ``**kwarg``</span>
<span class="sd">   )</span>


<span class="sd">Parameters</span>
<span class="sd">----------</span>
<span class="sd">precision : int or None, optional</span>
<span class="sd">    Number of digits of precision for floating point output (default 8).</span>
<span class="sd">    May be `None` if `floatmode` is not `fixed`, to print as many digits as</span>
<span class="sd">    necessary to uniquely specify the value.</span>

<span class="sd">threshold : int, optional</span>
<span class="sd">    Total number of array elements which trigger summarization</span>
<span class="sd">    rather than full repr (default 1000).</span>

<span class="sd">edgeitems : int, optional</span>
<span class="sd">    Number of array items in summary at beginning and end of</span>
<span class="sd">    each dimension (default 3).</span>

<span class="sd">linewidth : int, optional</span>
<span class="sd">    The number of characters per line for the purpose of inserting</span>
<span class="sd">    line breaks (default 75).</span>

<span class="sd">suppress : bool, optional</span>
<span class="sd">    If True, always print floating point numbers using fixed point</span>
<span class="sd">    notation, in which case numbers equal to zero in the current precision</span>
<span class="sd">    will print as zero.  If False, then scientific notation is used when</span>
<span class="sd">    absolute value of the smallest number is &lt; 1e-4 or the ratio of the</span>
<span class="sd">    maximum absolute value to the minimum is &gt; 1e3. The default is False.</span>

<span class="sd">nanstr : str, optional</span>
<span class="sd">    String representation of floating point not-a-number (default nan).</span>

<span class="sd">infstr : str, optional</span>
<span class="sd">    String representation of floating point infinity (default inf).</span>

<span class="sd">sign : string, either &#39;-&#39;, &#39;+&#39;, or &#39; &#39;, optional</span>
<span class="sd">    Controls printing of the sign of floating-point types. If &#39;+&#39;, always</span>
<span class="sd">    print the sign of positive values. If &#39; &#39;, always prints a space</span>
<span class="sd">    (whitespace character) in the sign position of positive values.  If</span>
<span class="sd">    &#39;-&#39;, omit the sign character of positive values. (default &#39;-&#39;)</span>

<span class="sd">formatter : dict of callables, optional</span>
<span class="sd">    If not None, the keys should indicate the type(s) that the respective</span>
<span class="sd">    formatting function applies to.  Callables should return a string.</span>
<span class="sd">    Types that are not specified (by their corresponding keys) are handled</span>
<span class="sd">    by the default formatters.  Individual types for which a formatter</span>
<span class="sd">    can be set are:</span>

<span class="sd">- &#39;bool&#39;</span>

<span class="sd">- &#39;int&#39;</span>

<span class="sd">- &#39;timedelta&#39; : a `numpy.timedelta64`</span>

<span class="sd">- &#39;datetime&#39; : a `numpy.datetime64`</span>

<span class="sd">- &#39;float&#39;</span>

<span class="sd">- &#39;longfloat&#39; : 128-bit floats</span>

<span class="sd">- &#39;complexfloat&#39;</span>

<span class="sd">- &#39;longcomplexfloat&#39; : composed of two 128-bit floats</span>

<span class="sd">- &#39;numpystr&#39; : types `numpy.string_` and `numpy.unicode_`</span>

<span class="sd">- &#39;object&#39; : `np.object_` arrays</span>

<span class="sd">- &#39;str&#39; : all other strings</span>

<span class="sd">Other keys that can be used to set a group of types at once are:</span>

<span class="sd">- &#39;all&#39; : sets all types</span>

<span class="sd">- &#39;int_kind&#39; : sets &#39;int&#39;</span>

<span class="sd">- &#39;float_kind&#39; : sets &#39;float&#39; and &#39;longfloat&#39;</span>

<span class="sd">- &#39;complex_kind&#39; : sets &#39;complexfloat&#39; and &#39;longcomplexfloat&#39;</span>

<span class="sd">- &#39;str_kind&#39; : sets &#39;str&#39; and &#39;numpystr&#39;</span>


<span class="sd">floatmode : str, optional</span>
<span class="sd">    Controls the interpretation of the `precision` option for</span>
<span class="sd">    floating-point types. Can take the following values:</span>

<span class="sd">* &#39;fixed&#39;: Always print exactly `precision` fractional digits,</span>
<span class="sd">   even if this would print more or fewer digits than</span>
<span class="sd">   necessary to specify the value uniquely.</span>

<span class="sd">* &#39;unique&#39;: Print the minimum number of fractional digits necessary</span>
<span class="sd">   to represent each value uniquely. Different elements may</span>
<span class="sd">   have a different number of digits. The value of the</span>
<span class="sd">   `precision` option is ignored.</span>

<span class="sd">* &#39;maxprec&#39;: Print at most `precision` fractional digits, but if</span>
<span class="sd">   an element can be uniquely represented with fewer digits</span>
<span class="sd">   only print it with that many.</span>

<span class="sd">* &#39;maxprec_equal&#39;: Print at most `precision` fractional digits,</span>
<span class="sd">   but if every element in the array can be uniquely</span>
<span class="sd">   represented with an equal number of fewer digits, use that</span>
<span class="sd">   many digits for all elements.</span>

<span class="sd">legacy : string or `False`, optional</span>
<span class="sd">    If set to the string `&#39;1.13&#39;` enables 1.13 legacy printing mode. This</span>
<span class="sd">    approximates numpy 1.13 print output by including a space in the sign</span>
<span class="sd">    position of floats and different behavior for 0d arrays. If set to</span>
<span class="sd">    `False`, disables legacy mode. Unrecognized strings will be ignored</span>
<span class="sd">    with a warning for forward compatibility.</span>

<span class="sd">.. versionadded:: 1.14.0</span>


<span class="sd">See Also</span>
<span class="sd">--------</span>
<span class="sd">get_printoptions, set_string_function, array2string</span>

<span class="sd">Notes</span>
<span class="sd">-----</span>
<span class="sd">`formatter` is always reset with a call to `set_printoptions`.</span>

<span class="sd">Examples</span>
<span class="sd">--------</span>
<span class="sd">Floating point precision can be set:</span>

<span class="sd">&gt;&gt;&gt; import numpy as np</span>
<span class="sd">&gt;&gt;&gt; np.set_printoptions(precision=4)</span>
<span class="sd">&gt;&gt;&gt; print(np.array([1.123456789]))</span>
<span class="sd">[1.1235]</span>

<span class="sd">Long arrays can be summarised:</span>

<span class="sd">&gt;&gt;&gt; import numpy as np</span>
<span class="sd">&gt;&gt;&gt; np.set_printoptions(threshold=5)</span>
<span class="sd">&gt;&gt;&gt; print(np.arange(10))</span>
<span class="sd">[0 1 2 ... 7 8 9]</span>

<span class="sd">Small results can be suppressed:</span>

<span class="sd">&gt;&gt;&gt; import numpy as np</span>
<span class="sd">&gt;&gt;&gt; eps = np.finfo(float).eps</span>
<span class="sd">&gt;&gt;&gt; x = np.arange(4.)</span>
<span class="sd">&gt;&gt;&gt; x**2 - (x + eps)**2</span>
<span class="sd">array([-4.9304e-32, -4.4409e-16,  0.0000e+00,  0.0000e+00])</span>
<span class="sd">&gt;&gt;&gt; np.set_printoptions(suppress=True)</span>
<span class="sd">&gt;&gt;&gt; x**2 - (x + eps)**2</span>
<span class="sd">array([-0., -0.,  0.,  0.])</span>

<span class="sd">A custom formatter can be used to display array elements as desired:</span>

<span class="sd">&gt;&gt;&gt; np.set_printoptions(formatter={&#39;all&#39;:lambda x: &#39;int: &#39;+str(-x)})</span>
<span class="sd">&gt;&gt;&gt; x = np.arange(3)</span>
<span class="sd">&gt;&gt;&gt; x</span>
<span class="sd">array([int: 0, int: -1, int: -2])</span>
<span class="sd">&gt;&gt;&gt; np.set_printoptions()  # formatter gets reset</span>
<span class="sd">&gt;&gt;&gt; x</span>
<span class="sd">array([0, 1, 2])</span>

<span class="sd">To put back the default options, you can use:</span>

<span class="sd">&gt;&gt;&gt; np.set_printoptions(edgeitems=3,infstr=&#39;inf&#39;,</span>
<span class="sd">... linewidth=75, nanstr=&#39;nan&#39;, precision=8,</span>
<span class="sd">... suppress=False, threshold=1000, formatter=None)</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">ctypes</span>
<span class="kn">import</span> <span class="nn">doctest</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">BASIC_FORMAT</span>
<span class="p">)</span>


<span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">ctypes</span> <span class="kn">import</span> <span class="n">WinDLL</span>


<div class="viewcode-block" id="numpy_setup"><a class="viewcode-back" href="../../../startup/41_numpy.html#default_profile.startup.41_numpy_init.numpy_setup">[docs]</a><span class="k">def</span> <span class="nf">numpy_setup</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Jeez this got platform specific.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="n">ModuleNotFoundError</span><span class="p">):</span>
        <span class="n">set_numpy_printoptions</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

        <span class="c1">###########</span>
        <span class="c1"># WAIT WHAT</span>
        <span class="c1">###########</span>

        <span class="c1"># If you catch an exception like this, does it not appear in sys.exc_info()</span>
        <span class="c1"># anymore or am i being an idiot?</span>
        <span class="c1"># Check again in the morning</span>

        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s2">&quot;last_type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">last_type</span> <span class="o">==</span> <span class="s2">&quot;WindowsError&quot;</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;Goddamnit Numpy. ctypes is fucking up again.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># i guess just return true to indicate success?</span></div>


<div class="viewcode-block" id="set_numpy_printoptions"><a class="viewcode-back" href="../../../startup/41_numpy.html#default_profile.startup.41_numpy_init.set_numpy_printoptions">[docs]</a><span class="k">def</span> <span class="nf">set_numpy_printoptions</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Define this function only if numpy can be imported.</span>

<span class="sd">    But don&#39;t end the script with sys.exit() because anything that imports</span>
<span class="sd">    this module will exit too. As the ``__init__.py`` imports this module</span>
<span class="sd">    the whole package breaks due to a simple installation issue.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    kwargs : dict</span>
<span class="sd">        Any options that should be overridden.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">numpy_mod</span> <span class="o">=</span> <span class="n">numpy_setup</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">numpy_mod</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

        <span class="c1"># setup worked so import it as normal</span>
        <span class="n">set_numpy_printoptions</span><span class="p">()</span>
</pre></div>

        </div>
      </div>
    </div>

    <div class="footer" role="contentinfo">
      Last updated on Feb 09, 2020.
    </div>
  </body>
</html>