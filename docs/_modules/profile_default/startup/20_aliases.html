
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>profile_default.startup.20_aliases &#8212; Dynamic IPython: version0.0.1</title>
    <link rel="stylesheet" href="../../../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <link rel="canonical" href="https://farisachugthai.github.io/dynamic-ipython/_modules/profile_default/startup/20_aliases.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Dynamic IPython</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for profile_default.startup.20_aliases</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">===============</span>
<span class="sd">IPython Aliases</span>
<span class="sd">===============</span>

<span class="sd">.. module:: 20_aliases</span>
<span class="sd">    :synopsis: Create aliases for :mod:`IPython` to ease use as a system shell.</span>

<span class="sd">.. highlight:: ipython</span>
<span class="sd">    :linenothreshold: 3</span>


<span class="sd">Overview</span>
<span class="sd">--------</span>

<span class="sd">This module utilizes `_ip`, the global :mod:`IPython` |ip|</span>
<span class="sd">instance, and fills the ``user_ns`` with aliases that are available</span>
<span class="sd">in a typical system shell.</span>

<span class="sd">Unfortunately, the exact definition of what a system shell is, what language</span>
<span class="sd">it responds to, and it&#39;s ability to receive and pass along input and output</span>
<span class="sd">in pipelines will vary greatly.</span>

<span class="sd">As a result, the module needs to test the user&#39;s OS, what shell they&#39;re using</span>
<span class="sd">and what executables are available on the :envvar:`PATH`.</span>

<span class="sd">On Unix platforms, it is assumed that the user is using a bash shell.</span>

<span class="sd">However on Windows, it is possible that the user has a shell that runs</span>
<span class="sd">:command:`dosbatch`, :command:`powershell`, or :command:`bash`.</span>

<span class="sd">As a result, the environment variable :envvar:`ComSpec` will be checked,</span>
<span class="sd">and if present, that value is used.</span>

<span class="sd">Attributes</span>
<span class="sd">----------</span>

<span class="sd">_ip : |ip|</span>
<span class="sd">    A global object representing the active IPython session.</span>
<span class="sd">    Contains varying packages as well as the current global namespace.</span>
<span class="sd">    Doesn&#39;t need to be defined in advance during an interactive session.</span>


<span class="sd">Notes</span>
<span class="sd">------</span>

<span class="sd">When writing aliases, an `%alias` definition can take various string</span>
<span class="sd">placeholders. As per the official documentation:</span>


<span class="sd">Parameters</span>
<span class="sd">----------</span>

<span class="sd">``%l`` : Command-line argument.</span>
<span class="sd">    You can use the ``%l`` specifier in an ``%alias`` definition to represent the</span>
<span class="sd">    whole line when the alias is called.</span>

<span class="sd">Meaning that it behaves similarly to the parameter ``$*`` in typical POSIX shells.</span>
<span class="sd">The documentation goes on to say:</span>

<span class="sd">.. ipython::</span>

<span class="sd">    In [2]: %alias bracket echo &quot;Input in brackets: &lt;%l&gt;&quot;</span>
<span class="sd">    In [3]: bracket hello world</span>
<span class="sd">    Input in brackets: &lt;hello world&gt;</span>

<span class="sd">Note that we quote when in the configuration file but when running alias</span>
<span class="sd">interactively the syntax ``%alias alias_name cmd`` doesn&#39;t require quoting.</span>


<span class="sd">See Also</span>
<span class="sd">--------</span>

<span class="sd">:mod:`IPython.core.alias`</span>
<span class="sd">    Module where the alias functionality for IPython is defined and the basic</span>
<span class="sd">    implementation scaffolded.</span>


<span class="sd">Todo</span>
<span class="sd">====</span>

<span class="sd">- ``ssh-day``</span>
<span class="sd">- ``extract``</span>
<span class="sd">- Cleaning up the current implementation of :command:`fzf`</span>
<span class="sd">  and continue building on its many invocations.</span>

<span class="sd">- A function that wraps around :func:|ip|`.MagicsManager.define_alias()` and</span>
<span class="sd">  checks for whether the executable is on the :envvar:`PATH` all in one swoop.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">shutil</span>

<span class="kn">from</span> <span class="nn">IPython</span> <span class="k">import</span> <span class="n">get_ipython</span>
<span class="kn">from</span> <span class="nn">IPython.core.alias</span> <span class="k">import</span> <span class="n">AliasError</span><span class="p">,</span> <span class="n">AliasManager</span>
<span class="kn">from</span> <span class="nn">IPython.core.error</span> <span class="k">import</span> <span class="n">UsageError</span>
<span class="kn">from</span> <span class="nn">traitlets.traitlets</span> <span class="k">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">profile_default.util</span> <span class="k">import</span> <span class="n">module_log</span>
<span class="kn">from</span> <span class="nn">profile_default.util.machine</span> <span class="k">import</span> <span class="n">Platform</span>

<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">module_log</span><span class="o">.</span><span class="n">stream_logger</span><span class="p">(</span>
    <span class="n">logger</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="vm">__name__</span><span class="p">),</span>
    <span class="n">msg_format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> : </span><span class="si">%(levelname)s</span><span class="s1"> : </span><span class="si">%(module)s</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="n">log_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">linux_specific_aliases</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Add Linux specific aliases.</span>

<span class="sd">    Aliases that have either:</span>

<span class="sd">        * Only been tested on Linux</span>
<span class="sd">        * Only natively exist on Linux</span>
<span class="sd">        * Clobber an existing Windows command (cmd in particular)</span>

<span class="sd">    Convenience packages exist such as ConEmu or Cmder which allow a large</span>
<span class="sd">    number of GNU/Linux built-ins to exist on Windows, and as a result, this</span>
<span class="sd">    list may not be comprehensive.</span>

<span class="sd">    Below is the source code for the function</span>
<span class="sd">    :func:`IPython.core.magics.define_alias()` that is invoked here.::</span>

<span class="sd">        def define_alias(self, name, cmd):</span>
<span class="sd">            # Define a new alias after validating it.</span>
<span class="sd">            # This will raise an :exc:`AliasError` if there are validation</span>
<span class="sd">            # problems.</span>
<span class="sd">            caller = Alias(shell=self.shell, name=name, cmd=cmd)</span>
<span class="sd">            self.shell.magics_manager.register_function(caller, magic_kind=&#39;line&#39;,</span>
<span class="sd">            magic_name=name)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    None</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    _ip.user_aliases : list of (&#39;alias&#39;, &#39;system command&#39;) tuples</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_user_aliases</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;ag&#39;</span><span class="p">,</span> <span class="s1">&#39;ag --hidden --color --no-column %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;cs&#39;</span><span class="p">,</span> <span class="s1">&#39;cd </span><span class="si">%s</span><span class="s1"> &amp;&amp; ls -F --color=always </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;cp -iv %l&#39;</span><span class="p">),</span>  <span class="c1"># cp mv mkdir and rmdir are all overridden</span>
        <span class="p">(</span><span class="s1">&#39;dus&#39;</span><span class="p">,</span> <span class="s1">&#39;du -d 1 -ha %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;echo&#39;</span><span class="p">,</span> <span class="s1">&#39;echo -e %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gpip&#39;</span><span class="p">,</span>
         <span class="s1">&#39;export PIP_REQUIRE_VIRTUALENV=0; python -m pip %l; export PIP_REQUIRE_VIRTUALENV=1 &gt; /dev/null&#39;</span>
         <span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gpip2&#39;</span><span class="p">,</span>
         <span class="s1">&#39;export PIP_REQUIRE_VIRTUALENV=0; python2 -m pip %l; export PIP_REQUIRE_VIRTUALENV=1 &gt; /dev/null&#39;</span>
         <span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gpip3&#39;</span><span class="p">,</span>
         <span class="s1">&#39;export PIP_REQUIRE_VIRTUALENV=0; python3 -m pip %l; export PIP_REQUIRE_VIRTUALENV=1 &gt; /dev/null&#39;</span>
         <span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">,</span> <span class="s1">&#39;head -n 30 %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;la&#39;</span><span class="p">,</span> <span class="s1">&#39;ls -AF --color=always %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;ls -CF --color=always %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ll&#39;</span><span class="p">,</span> <span class="s1">&#39;ls -AlF --color=always %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ls&#39;</span><span class="p">,</span> <span class="s1">&#39;ls -F --color=always %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;lt&#39;</span><span class="p">,</span> <span class="s1">&#39;ls -Altcr --color=always %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;mk&#39;</span><span class="p">,</span> <span class="s1">&#39;mkdir -pv %l &amp;&amp; cd %l&#39;</span><span class="p">),</span>  <span class="c1"># check if this works. only mkdir</span>
        <span class="p">(</span><span class="s1">&#39;mkdir&#39;</span><span class="p">,</span> <span class="s1">&#39;mkdir -pv %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;mv&#39;</span><span class="p">,</span> <span class="s1">&#39;mv -iv %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;nman&#39;</span><span class="p">,</span> <span class="s1">&#39;nvim -c &quot;Man %l&quot; -c&quot;wincmd T&quot;&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;fc -s&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;redo&#39;</span><span class="p">,</span> <span class="s1">&#39;fc -s&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;rm&#39;</span><span class="p">,</span> <span class="s1">&#39;rm -v %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;rmdir&#39;</span><span class="p">,</span> <span class="s1">&#39;rmdir -v %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;profile_default&#39;</span><span class="p">,</span>
         <span class="s1">&#39;cd ~/projects/dotfiles/unix/.ipython/profile_default&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;startup&#39;</span><span class="p">,</span>
         <span class="s1">&#39;cd ~/projects/dotfiles/unix/.ipython/profile_default/startup&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;tail&#39;</span><span class="p">,</span> <span class="s1">&#39;tail -n 30 %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;tre&#39;</span><span class="p">,</span> <span class="s1">&#39;tree -ashFC -I .git -I __pycache__ --filelimit 25&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">_user_aliases</span>


<span class="k">def</span> <span class="nf">common_aliases</span><span class="p">():</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Add aliases common to all OSes. Overwhelmingly :command:`Git` aliases.</span>

<span class="sd">    This method adds around 70 to 80 aliases that can be implemented on most</span>
<span class="sd">    of the major platforms.</span>

<span class="sd">    The only real requirement is Git being installed and working. Docker</span>
<span class="sd">    commands possibly going to be added.</span>

<span class="sd">    .. todo:: :command:`git show`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_user_aliases</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;git diff --staged --stat %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ga&#39;</span><span class="p">,</span> <span class="s1">&#39;git add %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gaa&#39;</span><span class="p">,</span> <span class="s1">&#39;git add --all %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gai&#39;</span><span class="p">,</span> <span class="s1">&#39;git add --interactive %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gap&#39;</span><span class="p">,</span> <span class="s1">&#39;git add --patch %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gar&#39;</span><span class="p">,</span> <span class="s1">&#39;git add --renormalize -A %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gau&#39;</span><span class="p">,</span> <span class="s1">&#39;git add --update %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ga.&#39;</span><span class="p">,</span> <span class="s1">&#39;git add .&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gb&#39;</span><span class="p">,</span> <span class="s1">&#39;git branch --all %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gbl&#39;</span><span class="p">,</span> <span class="s1">&#39;git blame %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gbr&#39;</span><span class="p">,</span> <span class="s1">&#39;git branch %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gbru&#39;</span><span class="p">,</span> <span class="s1">&#39;git branch --set-upstream-to origin %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gbrv&#39;</span><span class="p">,</span> <span class="s1">&#39;git branch --all --verbose %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gci&#39;</span><span class="p">,</span> <span class="s1">&#39;git commit %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gcia&#39;</span><span class="p">,</span> <span class="s1">&#39;git commit --amend %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gciad&#39;</span><span class="p">,</span> <span class="s1">&#39;git commit --amend --date=%l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gcid&#39;</span><span class="p">,</span> <span class="s1">&#39;git commit --date=%l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gcim&#39;</span><span class="p">,</span> <span class="s1">&#39;git commit --verbose --message </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gcl&#39;</span><span class="p">,</span> <span class="s1">&#39;git clone %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gcls&#39;</span><span class="p">,</span> <span class="s1">&#39;git clone --depth 1 %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gco&#39;</span><span class="p">,</span> <span class="s1">&#39;git checkout %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gcob&#39;</span><span class="p">,</span> <span class="s1">&#39;git checkout -b %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gd&#39;</span><span class="p">,</span> <span class="s1">&#39;git diff %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gds&#39;</span><span class="p">,</span> <span class="s1">&#39;git diff --staged %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gds2&#39;</span><span class="p">,</span> <span class="s1">&#39;git diff --staged --stat %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gdt&#39;</span><span class="p">,</span> <span class="s1">&#39;git difftool %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gdw&#39;</span><span class="p">,</span> <span class="s1">&#39;git diff --word-diff %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gf&#39;</span><span class="p">,</span> <span class="s1">&#39;git fetch --all %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gfe&#39;</span><span class="p">,</span> <span class="s1">&#39;git fetch %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ggc&#39;</span><span class="p">,</span> <span class="s1">&#39;git gc %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ggcp&#39;</span><span class="p">,</span> <span class="s1">&#39;git gc --prune %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git&#39;</span><span class="p">,</span> <span class="s1">&#39;git %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git hist&#39;</span><span class="p">,</span>
         <span class="s1">&#39;git log --pretty=&quot;format:%h </span><span class="si">%a</span><span class="s1">d | </span><span class="si">%d</span><span class="s1"> [</span><span class="si">%a</span><span class="s1">n]&quot; --graph --date=short &#39;</span>
         <span class="s1">&#39;--branches --abbrev-commit --oneline %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git last&#39;</span><span class="p">,</span> <span class="s1">&#39;git log -1 HEAD %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gl&#39;</span><span class="p">,</span> <span class="s1">&#39;git log %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;glo&#39;</span><span class="p">,</span>
         <span class="s1">&#39;git log --graph --decorate --abbrev-commit --oneline --branches --all&#39;</span>
         <span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gls&#39;</span><span class="p">,</span> <span class="s1">&#39;git ls-tree master %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git ls&#39;</span><span class="p">,</span> <span class="s1">&#39;git ls-tree master %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gm&#39;</span><span class="p">,</span> <span class="s1">&#39;git merge --no-ff %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gma&#39;</span><span class="p">,</span> <span class="s1">&#39;git merge --abort %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gmc&#39;</span><span class="p">,</span> <span class="s1">&#39;git merge --continue %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gmm&#39;</span><span class="p">,</span> <span class="s1">&#39;git merge master %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gmt&#39;</span><span class="p">,</span> <span class="s1">&#39;git mergetool %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gp&#39;</span><span class="p">,</span> <span class="s1">&#39;git pull --all&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gpo&#39;</span><span class="p">,</span> <span class="s1">&#39;git pull origin&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gpom&#39;</span><span class="p">,</span> <span class="s1">&#39;git pull origin master&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gpu&#39;</span><span class="p">,</span> <span class="s1">&#39;git push&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gr&#39;</span><span class="p">,</span> <span class="s1">&#39;git remote -v %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gre&#39;</span><span class="p">,</span> <span class="s1">&#39;git remote %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;grb&#39;</span><span class="p">,</span> <span class="s1">&#39;git rebase %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;grba&#39;</span><span class="p">,</span> <span class="s1">&#39;git rebase --abort %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;grbc&#39;</span><span class="p">,</span> <span class="s1">&#39;git rebase --continue %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;grbi&#39;</span><span class="p">,</span> <span class="s1">&#39;git rebase --interactive %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gs&#39;</span><span class="p">,</span> <span class="s1">&#39;git status %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gsh&#39;</span><span class="p">,</span> <span class="s1">&#39;git stash %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gsha&#39;</span><span class="p">,</span> <span class="s1">&#39;git stash apply %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gshc&#39;</span><span class="p">,</span> <span class="s1">&#39;git stash clear %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gshd&#39;</span><span class="p">,</span> <span class="s1">&#39;git stash drop %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gshl&#39;</span><span class="p">,</span> <span class="s1">&#39;git stash list %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gshp&#39;</span><span class="p">,</span> <span class="s1">&#39;git stash pop %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gshs&#39;</span><span class="p">,</span> <span class="s1">&#39;git stash show %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gshsp&#39;</span><span class="p">,</span> <span class="s1">&#39;git stash show --patch %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gss&#39;</span><span class="p">,</span> <span class="s1">&#39;git status -sb %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gst&#39;</span><span class="p">,</span> <span class="s1">&#39;git diff --stat %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git staged&#39;</span><span class="p">,</span> <span class="s1">&#39;git diff --cached %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git rel&#39;</span><span class="p">,</span> <span class="s1">&#39;git rev-parse --show-prefix %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git root&#39;</span><span class="p">,</span> <span class="s1">&#39;git rev-parse --show-toplevel %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git unstage&#39;</span><span class="p">,</span> <span class="s1">&#39;git reset HEAD %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;git unstaged&#39;</span><span class="p">,</span> <span class="s1">&#39;git diff %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gt&#39;</span><span class="p">,</span> <span class="s1">&#39;git tag --list %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;lswitch&#39;</span><span class="p">,</span> <span class="s1">&#39;legit switch&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;lsync&#39;</span><span class="p">,</span> <span class="s1">&#39;legit sync&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;lpublish&#39;</span><span class="p">,</span> <span class="s1">&#39;legit publish&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;lunpublish&#39;</span><span class="p">,</span> <span class="s1">&#39;legit unpublish&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;lundo&#39;</span><span class="p">,</span> <span class="s1">&#39;legit undo&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;lbranches&#39;</span><span class="p">,</span> <span class="s1">&#39;legit branches&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ssh-day&#39;</span><span class="p">,</span> <span class="s1">&#39;eval &quot;$(ssh-agent -s)&quot;; ssh-add %l&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;xx&#39;</span><span class="p">,</span> <span class="s1">&#39;quit&#39;</span><span class="p">),</span>  <span class="c1"># this is a sweet one</span>
        <span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="s1">&#39;cd ..&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">,</span> <span class="s1">&#39;cd ../..&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">_user_aliases</span>


<div class="viewcode-block" id="WindowsAliases"><a class="viewcode-back" href="../../../startup/aliases.html#profile_default.startup.20_aliases.WindowsAliases">[docs]</a><span class="k">class</span> <span class="nc">WindowsAliases</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Aggregated Window aliases. Provides simplified system calls for NT.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    Implements aliases specific to cmd or powershell.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Would it be useful to subclass :class:`enum.Enum` here?</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the platform specific alias manager with IPython.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        shell : external command, optional</span>
<span class="sd">            The command used to invoke the sytem shell. Either</span>
<span class="sd">            :command:`cmd`, :command:`powershell` or :command:`pwsh`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ip</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shell</span> <span class="o">=</span> <span class="n">shell</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_find_exe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use :func:`shutil.which` to determine whether an executable exists.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        exe : command, optional</span>
<span class="sd">            The command to check.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        path : str (path-like)</span>
<span class="sd">            Where the executable is located.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">exe</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">exe</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">cmd_aliases</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Aliases for the :command:`cmd` shell.</span>

<span class="sd">        .. todo:: Cmd, :envvar:`COPYCMD` and IPython</span>

<span class="sd">            Need to consider how to handle env vars. Still working out how</span>
<span class="sd">            IPython&#39;s logic for Window&#39;s shells works, but that&#39;ll determine</span>
<span class="sd">            how :envvar:`SHELL` and :envvar:`COMSPEC` are handled.</span>

<span class="sd">            However it&#39;ll also take some consideration to figure out how to</span>
<span class="sd">            handle env vars like COPYCMD. Should we build them into the aliases</span>
<span class="sd">            we have here because that&#39;ll affect :data:`_ip.user_aliases.mv`?</span>

<span class="sd">            Also note DIRCMD for :command:`dir`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_ip</span><span class="o">.</span><span class="n">user_aliases</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;copy </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="s1">&#39;copy </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ddir&#39;</span><span class="p">,</span> <span class="s1">&#39;dir /ad /on %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ldir&#39;</span><span class="p">,</span> <span class="s1">&#39;dir /ad /on %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ll&#39;</span><span class="p">,</span> <span class="s1">&#39;dir /Q %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ln&#39;</span><span class="p">,</span> <span class="s1">&#39;mklink </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span>
             <span class="p">),</span>  <span class="c1"># I know this really isn&#39;t the same but I need it</span>
            <span class="p">(</span><span class="s1">&#39;make&#39;</span><span class="p">,</span> <span class="s1">&#39;make.bat %l&#39;</span><span class="p">),</span>  <span class="c1"># Useful when we&#39;re building docs</span>
            <span class="p">(</span><span class="s1">&#39;mklink&#39;</span><span class="p">,</span> <span class="s1">&#39;mklink </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;move&#39;</span><span class="p">,</span> <span class="s1">&#39;move </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;mv&#39;</span><span class="p">,</span> <span class="s1">&#39;move </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ren&#39;</span><span class="p">,</span> <span class="s1">&#39;ren&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;rmdir&#39;</span><span class="p">,</span> <span class="s1">&#39;rmdir %l&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">_ip</span><span class="o">.</span><span class="n">user_aliases</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">powershell_aliases</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Aliases for Windows OSes using :command:`powershell`.</span>

<span class="sd">        Has only been tested on Windows 10 in a heavily configured environment.</span>

<span class="sd">        Niceties such as Git for Windows, ag-silversearcher, ripgrep,</span>
<span class="sd">        ConEmu and others have been added.</span>

<span class="sd">        The minimum number of assumptions possible have been made; however, note</span>
<span class="sd">        that this section is still under development and frequently changes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_aliases</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;ac&#39;</span><span class="p">,</span> <span class="s1">&#39;Add-Content %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;asnp&#39;</span><span class="p">,</span> <span class="s1">&#39;Add-PSSnapin %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;Get-Content %l&#39;</span><span class="p">),</span>
            <span class="c1"># (&#39;cd&#39;, &#39;Set-Location %l&#39;),</span>
            <span class="p">(</span><span class="s1">&#39;clc&#39;</span><span class="p">,</span> <span class="s1">&#39;Clear-Content %l&#39;</span><span class="p">),</span>
            <span class="c1"># (&#39;clear&#39;, &#39;Clear-History %l&#39;),</span>
            <span class="p">(</span><span class="s1">&#39;conda env&#39;</span><span class="p">,</span> <span class="s1">&#39;Get-Conda-Environment %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="s1">&#39;Copy-Item %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;Copy-Item %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;del&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove-Item %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span> <span class="s1">&#39;Get-ChildItem %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;echo&#39;</span><span class="p">,</span> <span class="s1">&#39;Write-Output %l&#39;</span><span class="p">),</span>
            <span class="c1"># (&#39;history&#39;, &#39;Get-History %l&#39;),</span>
            <span class="p">(</span><span class="s1">&#39;kill&#39;</span><span class="p">,</span> <span class="s1">&#39;Stop-Process&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;Get-ChildItem %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ll&#39;</span><span class="p">,</span> <span class="s1">&#39;GetChildItem -Verbose %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ls&#39;</span><span class="p">,</span> <span class="s1">&#39;Get-ChildItem %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;man&#39;</span><span class="p">,</span> <span class="s1">&#39;Get-Help %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;md&#39;</span><span class="p">,</span> <span class="s1">&#39;mkdir %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;move&#39;</span><span class="p">,</span> <span class="s1">&#39;Move-Item %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;mv&#39;</span><span class="p">,</span> <span class="s1">&#39;Move-Item %l&#39;</span><span class="p">),</span>
            <span class="c1"># (&#39;popd&#39;, &#39;Pop-Location %l&#39;),</span>
            <span class="p">(</span><span class="s1">&#39;pro&#39;</span><span class="p">,</span> <span class="s1">&#39;nvim $Profile.CurrentUserAllHosts&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ps&#39;</span><span class="p">,</span> <span class="s1">&#39;Get-Process %l&#39;</span><span class="p">),</span>
            <span class="c1"># (&#39;pushd&#39;, &#39;Push-Location %l&#39;),</span>
            <span class="c1"># (&#39;pwd&#39;, &#39;Get-Location %l&#39;),</span>
            <span class="p">(</span><span class="s1">&#39;ren&#39;</span><span class="p">,</span> <span class="s1">&#39;Rename-Item %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;rm&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove-Item %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;rmdir&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove-Item %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;rp&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove-ItemProperty %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;rsn&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove-PSSession %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;rv&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove-Variable %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;rvpa&#39;</span><span class="p">,</span> <span class="s1">&#39;Resolve-Path %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sajb&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-Job %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sal&#39;</span><span class="p">,</span> <span class="s1">&#39;Set-Alias %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;saps&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-Process %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sasv&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-Service %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sbp&#39;</span><span class="p">,</span> <span class="s1">&#39;Set-PSBreakpoint %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;select&#39;</span><span class="p">,</span> <span class="s1">&#39;Select-Object %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;set&#39;</span><span class="p">,</span> <span class="s1">&#39;Set-Variable %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;si&#39;</span><span class="p">,</span> <span class="s1">&#39;Set-Item %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sl&#39;</span><span class="p">,</span> <span class="s1">&#39;Set-Location %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sleep&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-Sleep %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sls&#39;</span><span class="p">,</span> <span class="s1">&#39;Select-String %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sort&#39;</span><span class="p">,</span> <span class="s1">&#39;Sort-Object %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sp&#39;</span><span class="p">,</span> <span class="s1">&#39;Set-ItemProperty %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;spjb&#39;</span><span class="p">,</span> <span class="s1">&#39;Stop-Job %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;spps&#39;</span><span class="p">,</span> <span class="s1">&#39;Stop-Process %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;spsv&#39;</span><span class="p">,</span> <span class="s1">&#39;Stop-Service %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-Process %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;stz&#39;</span><span class="p">,</span> <span class="s1">&#39;Set-TimeZone %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;sv&#39;</span><span class="p">,</span> <span class="s1">&#39;Set-Variable %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;tee&#39;</span><span class="p">,</span> <span class="s1">&#39;Tee-Object %l&#39;</span><span class="p">),</span>
            <span class="p">(</span>
                <span class="s1">&#39;tree&#39;</span><span class="p">,</span>
                <span class="s1">&#39;tree /F /A %l&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;Get-Content %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;where&#39;</span><span class="p">,</span> <span class="s1">&#39;Where-Object %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;wjb&#39;</span><span class="p">,</span> <span class="s1">&#39;Wait-Job %l&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;write&#39;</span><span class="p">,</span> <span class="s1">&#39;Write-Output %l&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">_ip</span><span class="o">.</span><span class="n">user_aliases</span>

    <span class="k">def</span> <span class="nf">user_shell</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determine the user&#39;s shell.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SHELL&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SHELL&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;COMSPEC&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;COMSPEC&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span></div>


<span class="k">def</span> <span class="nf">__setup_fzf</span><span class="p">(</span><span class="n">user_aliases</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Needs a good deal of work.</span>

<span class="sd">    On second thought this function has some potential. Or at least it</span>
<span class="sd">    jogged a thought in my brain.</span>

<span class="sd">    A good idea would be to make a function that&#39;s implemented as a decorator,</span>
<span class="sd">    so we&#39;ll need to import functools.wrapped, and have that decorator run</span>
<span class="sd">    shutil.which on an external command. If it exists continue with the</span>
<span class="sd">    function and alias it. If it doesn&#39;t, then return None.</span>

<span class="sd">    This function was useful for pointing out that the decorator should allow</span>
<span class="sd">    for multiple arguments.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s1">&#39;fzf&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s1">&#39;rg&#39;</span><span class="p">):</span>
        <span class="c1"># user_aliases.extend(</span>
        <span class="c1">#     (&#39;fzf&#39;, &#39;$FZF_DEFAULT_COMMAND | fzf-tmux $FZF_DEFAULT_OPTS&#39;))</span>
        <span class="n">user_aliases</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span>
            <span class="s1">&#39;fzf&#39;</span><span class="p">,</span>
            <span class="s1">&#39;rg --pretty --hidden --max-columns=300 --max-columns-preview &#39;</span>
            <span class="s1">&#39;.*[a-zA-Z]* --no-heading -m=30 --no-messages --color=ansi --no-column &#39;</span>
            <span class="s1">&#39; --no-line-number -C 0 | fzf --ansi&#39;</span><span class="p">))</span>

    <span class="k">elif</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s1">&#39;fzf&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s1">&#39;ag&#39;</span><span class="p">):</span>
        <span class="c1"># user_aliases.extend(</span>
        <span class="c1">#     (&#39;fzf&#39;, &#39;$FZF_DEFAULT_COMMAND | fzf-tmux $FZF_DEFAULT_OPTS&#39;))</span>
        <span class="n">user_aliases</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">(</span><span class="s1">&#39;fzf&#39;</span><span class="p">,</span> <span class="s1">&#39;ag -C 0 --color-win-ansi --noheading | fzf --ansi&#39;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">user_aliases</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Set up aliases for the user namespace for IPython.</span>

<span class="sd">    Planning on coming up with a new way of introducing the aliases into the user namespace.</span>

<span class="sd">    Here&#39;s an interesting problem I ran into.</span>

<span class="sd">    .. ipython::</span>

<span class="sd">        from traitlets.traitlets import List</span>
<span class="sd">        user_aliases = [  # let&#39;s just fill this with some filler text</span>
<span class="sd">            (&#39;ls&#39;, &#39;ls&#39;)</span>
<span class="sd">        ]</span>
<span class="sd">        # Then tried running what would be the equivalent of running</span>
<span class="sd">        # %config AliasManager.user_aliases = user_aliases</span>

<span class="sd">    .. ipython::</span>
<span class="sd">        :okexcept:</span>

<span class="sd">        ~\.ipython\profile_default\startup\20_aliases.py in main()</span>
<span class="sd">            461</span>
<span class="sd">            462     user_aliases_traitlets = List(user_aliases)</span>
<span class="sd">        --&gt; 463     _ip.run_line_magic(&#39;config&#39;, AliasManager.user_aliases+user_aliases_traitlets)</span>
<span class="sd">            464</span>
<span class="sd">            465</span>

<span class="sd">        TypeError: unsupported operand type(s) for +: &#39;List&#39; and &#39;List&#39;</span>

<span class="sd">    Wait what? A :class:`traitlets.traitlets.List` can&#39;t be added with itself?</span>
<span class="sd">    If that&#39;s true then that&#39;s definitely a bug right?</span>

<span class="sd">    Aug 31, 2019:</span>

<span class="sd">    So now I don&#39;t know if it&#39;s a bug but it&#39;s certainly odd behavior.</span>
<span class="sd">    The output of ``print(dir(traitlets.traitlets.List))`` contains</span>
<span class="sd">    ``__set__``. What? No ``__add__`` or anything?</span>

<span class="sd">    And none of the methods looked like they intended on allowing multiple</span>
<span class="sd">    assignments.</span>

<span class="sd">    Whoa so is the :class:`traitlets.traitlets.List` supposed to be used</span>
<span class="sd">    as an immutable set?</span>

<span class="sd">    Gotta understand what I&#39; saying when I say that that&#39;s confusing.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_ip</span><span class="p">,</span> <span class="s1">&#39;magics_manager&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Are you running in IPython?&#39;</span><span class="p">)</span>

    <span class="n">user_aliases</span> <span class="o">=</span> <span class="n">common_aliases</span><span class="p">()</span>
    <span class="n">machine</span> <span class="o">=</span> <span class="n">Platform</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">machine</span><span class="o">.</span><span class="n">is_linux</span><span class="p">:</span>
        <span class="n">user_aliases</span> <span class="o">+=</span> <span class="n">linux_specific_aliases</span><span class="p">(</span><span class="n">_ip</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">machine</span><span class="o">.</span><span class="n">is_win</span><span class="p">:</span>
        <span class="c1"># finish the shell class in profile_default.util.machine</span>
        <span class="c1"># then we can create a shell class that determines if</span>
        <span class="c1"># we&#39;re in cmd or pwsh</span>
        <span class="c1"># win_ = WindowsAliases(_ip)</span>
        <span class="c1"># if win</span>
        <span class="n">user_aliases</span> <span class="o">+=</span> <span class="n">WindowsAliases</span><span class="p">()</span><span class="o">.</span><span class="n">cmd_aliases</span><span class="p">()</span>

    <span class="n">__setup_fzf</span><span class="p">(</span><span class="n">user_aliases</span><span class="p">)</span>

    <span class="n">_ip</span><span class="o">.</span><span class="n">run_line_magic</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">,</span>
                       <span class="s2">&quot;AliasManager.user_aliases=&quot;</span> <span class="o">+</span> <span class="n">user_aliases</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">_ip</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">_ip</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">main</span><span class="p">()</span>
    <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Number of aliases is: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                 <span class="nb">len</span><span class="p">(</span><span class="n">_ip</span><span class="o">.</span><span class="n">run_line_magic</span><span class="p">(</span><span class="s1">&#39;alias&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)))</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>

<h3><a href="../../../index.html">Table of Contents</a></h3>

<div>&nbsp;</div>
<div id="sidebartoc">
    <p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ipython_keybindings.html">Keybindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../magics.html">Built-in Magics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../custom_magics.html">Writing Your Own Magics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../exceptions.html">Customized Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sphinxext.html">IPython Sphinx Directive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev.html">Developers Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../startup/index.html">IPython Shell Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../util.html">General Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jupyter.html">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extensions.html">Extensions</a></li>
</ul>

</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Dynamic IPython</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright (C) 2018-2019 Faris Chugthai.
      Last updated on Sep 01, 2019.
    </div>
  </body>
</html>