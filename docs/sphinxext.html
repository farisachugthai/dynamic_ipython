<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>
      IPython Sphinx Directive &#8212; Dynamic IPython: version0.0.2
    </title>
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script
      type="text/javascript"
      id="documentation_options"
      data-url_root="./"
      src="_static/documentation_options.js"
    ></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <link
      rel="canonical"
      href="https://farisachugthai.github.io/dynamic-ipython/sphinxext.html"
    />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="New IPython Console Lexer" href="lexer.html" />
    <link
      rel="prev"
      title="Subcommands in IPython and Jupyter"
      href="subcommands.html"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Code+Pro"
      type="text/css"
      media="screen"
      charset="utf-8"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Code+Pro:regular,italic,bold,bolditalic"
      type="text/css"
      media="screen"
      charset="utf-8"
    />

    <!--[if lte IE 6]>
      <link
        rel="stylesheet"
        href="_static/ie6.css"
        type="text/css"
        media="screen"
        charset="utf-8"
      />
    <![endif]-->
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index" accesskey="I">index</a>
        </li>
        <li class="right">
          <a href="py-modindex.html" title="Python Module Index">modules</a> |
        </li>
        <li class="right">
          <a href="lexer.html" title="New IPython Console Lexer" accesskey="N"
            >next</a
          >
          |
        </li>
        <li class="right">
          <a
            href="subcommands.html"
            title="Subcommands in IPython and Jupyter"
            accesskey="P"
            >previous</a
          >
          |
        </li>
        <li class="nav-item nav-item-0">
          <a href="index.html">Dynamic IPython</a> &#187;
        </li>
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            <div class="section" id="module-sphinx_directive">
              <span id="id1"></span><span id="ipython-sphinx-directive"></span>
              <h1>
                IPython Sphinx Directive<a
                  class="headerlink"
                  href="#module-sphinx_directive"
                  title="Permalink to this headline"
                  >¶</a
                >
              </h1>
              <p>
                The
                <a
                  class="reference external"
                  href="https://ipython.readthedocs.io/en/stable/api/generated/IPython.html#module-IPython"
                  title="(in IPython v7.8.0)"
                  ><code class="xref py py-mod docutils literal notranslate"
                    ><span class="pre">IPython</span></code
                  ></a
                >
                directive is a stateful shell that can be used in reStructured
                text files.
              </p>
              <p>
                The Sphinx project, for those who are unfamiliar, is used to
                create documentation from valid Python source in order to
                generate HTML.
              </p>
              <p>
                The generated HTML can then be uploaded online and be served as
                the official documentation for software projects in the varying
                languages that Sphinx supports.
              </p>
              <p>
                The IPython directive builds on this functionality by creating
                an
                <a
                  class="reference internal"
                  href="#directive-ipython"
                  title="ipython directive"
                  ><code class="xref rst rst-dir docutils literal notranslate"
                    ><span class="pre">ipython</span></code
                  ></a
                >
                directive. This allows for a user to, for example, copy and
                paste their interactive session into an reStructured text file.
              </p>
              <p>
                While generating the HTML, the IPython Sphinx shell can also
                parse and validate IPython code, syntax highlight source code
                that’s been included literally, and embed plots based on the
                live embedded data.
              </p>
              <p>
                Specifically, the IPython Sphinx extension correctly parses
                standard IPython prompts, and extracts the input and output
                lines to generate HTML.
              </p>
              <div class="section" id="directive-and-options">
                <h2>
                  Directive and options<a
                    class="headerlink"
                    href="#directive-and-options"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>
                  The IPython directive takes a number of options detailed here.
                </p>
                <dl class="directive">
                  <dt id="directive-ipython">
                    <code class="sig-name descname">.. ipython::</code
                    ><a
                      class="headerlink"
                      href="#directive-ipython"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>Create an IPython directive.</p>
                    <dl class="directive:option">
                      <dt id="directive:option-ipython-doctest">
                        <code class="sig-name descname">:doctest:</code
                        ><em class="property">
                          Run a doctest on IPython code blocks in rst.</em
                        ><a
                          class="headerlink"
                          href="#directive:option-ipython-doctest"
                          title="Permalink to this definition"
                          >¶</a
                        >
                      </dt>
                      <dd></dd>
                    </dl>

                    <dl class="directive:option">
                      <dt id="directive:option-ipython-python">
                        <code class="sig-name descname">:python:</code
                        ><em class="property">
                          Used to indicate that the relevant code block does not
                          have IPython prompts.</em
                        ><a
                          class="headerlink"
                          href="#directive:option-ipython-python"
                          title="Permalink to this definition"
                          >¶</a
                        >
                      </dt>
                      <dd></dd>
                    </dl>

                    <dl class="directive:option">
                      <dt id="directive:option-ipython-okexcept">
                        <code class="sig-name descname">:okexcept:</code
                        ><em class="property">
                          Allow the code block to raise an exception.</em
                        ><a
                          class="headerlink"
                          href="#directive:option-ipython-okexcept"
                          title="Permalink to this definition"
                          >¶</a
                        >
                      </dt>
                      <dd></dd>
                    </dl>

                    <dl class="directive:option">
                      <dt id="directive:option-ipython-okwarning">
                        <code class="sig-name descname">:okwarning:</code
                        ><em class="property">
                          Allow the code block to emit an warning.</em
                        ><a
                          class="headerlink"
                          href="#directive:option-ipython-okwarning"
                          title="Permalink to this definition"
                          >¶</a
                        >
                      </dt>
                      <dd></dd>
                    </dl>

                    <dl class="directive:option">
                      <dt id="directive:option-ipython-suppress">
                        <code class="sig-name descname">:suppress:</code
                        ><em class="property">
                          Silence any warnings or expected errors.</em
                        ><a
                          class="headerlink"
                          href="#directive:option-ipython-suppress"
                          title="Permalink to this definition"
                          >¶</a
                        >
                      </dt>
                      <dd></dd>
                    </dl>

                    <dl class="directive:option">
                      <dt id="directive:option-ipython-verbatim">
                        <code class="sig-name descname">:verbatim:</code
                        ><em class="property">
                          A noop that allows for any text to be syntax
                          highlighted as valid IPython code.</em
                        ><a
                          class="headerlink"
                          href="#directive:option-ipython-verbatim"
                          title="Permalink to this definition"
                          >¶</a
                        >
                      </dt>
                      <dd></dd>
                    </dl>

                    <dl class="directive:option">
                      <dt id="directive:option-ipython-savefig">
                        <code class="sig-name descname">:savefig:</code
                        ><em class="property">
                          Save output from matplotlib to *outfile*.</em
                        ><a
                          class="headerlink"
                          href="#directive:option-ipython-savefig"
                          title="Permalink to this definition"
                          >¶</a
                        >
                      </dt>
                      <dt id="directive:option-ipython-OUTFILE [IMAGE_OPTIONS]">
                        <code class="sig-name descname"
                          >:OUTFILE [IMAGE_OPTIONS]:</code
                        ><a
                          class="headerlink"
                          href="#directive:option-ipython-OUTFILE [IMAGE_OPTIONS]"
                          title="Permalink to this definition"
                          >¶</a
                        >
                      </dt>
                      <dd></dd>
                    </dl>
                  </dd>
                </dl>

                <p>
                  It’s important to note that all of these options can be used
                  for the entire directive block or they can decorate individual
                  lines of code.
                </p>
                <p>
                  One may find it useful to reference the relevant documentation
                  from the
                  <a
                    class="reference external"
                    href="`&lt;http://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#the-restructuredtext-domain&gt;`"
                    >Sphinx</a
                  >
                  project and Docutils.
                </p>
                <div class="section" id="see-also">
                  <h3>
                    See Also<a
                      class="headerlink"
                      href="#see-also"
                      title="Permalink to this headline"
                      >¶</a
                    >
                  </h3>
                  <div class="admonition seealso">
                    <p class="admonition-title">See also</p>
                    <p>
                      <a
                        class="reference external"
                        href="http://www.sphinx-doc.org/en/master/"
                        >The Sphinx documentation project</a
                      >
                      has phenomenal documentation and provides a good reference
                      when working with rst files.
                    </p>
                    <p>
                      In addition the source for each page of the documentation
                      is easily obtainable from the “Show Source” button.
                    </p>
                  </div>
                  <div class="admonition seealso">
                    <p class="admonition-title">See also</p>
                    <p>
                      <a
                        class="reference external"
                        href="http://docutils.sourceforge.net/docs/ref/rst/directives.html#image"
                        >Image Options for rst directives from docutils</a
                      >
                      for details.
                    </p>
                  </div>
                  <div class="admonition seealso">
                    <p class="admonition-title">See also</p>
                    <p>
                      <a class="reference internal" href="#configuration-values"
                        ><span class="std std-ref"
                          >Configuration Values</span
                        ></a
                      >
                    </p>
                    <p>
                      Check towards the bottom of this document to view all
                      IPython configuration options.
                    </p>
                  </div>
                </div>
              </div>
              <div class="section" id="directive-usage">
                <span id="ipython-directive-usage"></span>
                <h2>
                  Directive Usage<a
                    class="headerlink"
                    href="#directive-usage"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>
                  These prompts will be renumbered starting at
                  <code class="docutils literal notranslate"
                    ><span class="pre">1</span></code
                  >
                  regardless of the actual number displayed in the source code.
                </p>
                <p>For example, code blocks like the following:</p>
                <div class="highlight-ipython notranslate">
                  <table class="highlighttable">
                    <tr>
                      <td class="linenos">
                        <div class="linenodiv">
                          <pre>
1
2
3
4
5
6</pre
                          >
                        </div>
                      </td>
                      <td class="code">
                        <div class="highlight">
                          <pre><span></span><span class="go">.. ipython::</span>

<span class="go">   In [136]: x = 2</span>

<span class="go">   In [137]: x**3</span>
<span class="go">   Out[137]: 8</span>
</pre>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
                <p>will be rendered as:</p>
                <div class="highlight-ipython notranslate">
                  <table class="highlighttable">
                    <tr>
                      <td class="linenos">
                        <div class="linenodiv">
                          <pre>
1
2
3
4</pre
                          >
                        </div>
                      </td>
                      <td class="code">
                        <div class="highlight">
                          <pre><span></span><span class="gp">In [1]: </span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>

<span class="gp">In [2]: </span><span class="n">x</span><span class="o">**</span><span class="mi">3</span>
<span class="gh">Out[2]: </span><span class="go">8</span>
</pre>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class="admonition note">
                  <p class="admonition-title">Note</p>
                  <p>
                    This tutorial should be read side-by-side with the
                    <a
                      class="reference external"
                      href="../_sources/sphinxext.rst.txt"
                      >Sphinx source</a
                    >
                    that generated this document. With the exception of the
                    example given above, the literal ReStructured Text will not
                    be displayed alongside the rendered output.
                  </p>
                </div>
              </div>
              <div
                class="section"
                id="persisting-the-session-across-ipython-directive-blocks"
              >
                <h2>
                  Persisting the session across IPython directive blocks<a
                    class="headerlink"
                    href="#persisting-the-session-across-ipython-directive-blocks"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>
                  The state from previous code-blocks is stored, and carries
                  over from section to section. The IPython shell will maintain
                  and continue to execute in the same namespace so long as it
                  remains in the same document.
                </p>
                <p>
                  This can be useful for documentation that may need to build on
                  a few lengthier examples rather than a handful of shorter
                  snippets.
                </p>
                <p>
                  In addition, IPython’s output and
                  <a
                    class="reference external"
                    href="https://docs.python.org/3/library/sys.html#sys.stderr"
                    title="(in Python v3.7)"
                    ><code class="xref py py-data docutils literal notranslate"
                      ><span class="pre">sys.stderr</span></code
                    ></a
                  >
                  will be inserted at doc build time, and the prompts will be
                  renumbered starting from
                  <code class="docutils literal notranslate"
                    ><span class="pre">1</span></code
                  >. For example, the prompt below is renumbered so as to follow
                  the code block from above.
                </p>
                <div class="highlight-ipythontb notranslate">
                  <table class="highlighttable">
                    <tr>
                      <td class="linenos">
                        <div class="linenodiv">
                          <pre>
 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre
                          >
                        </div>
                      </td>
                      <td class="code">
                        <div class="highlight">
                          <pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">138</span><span class="p">]:</span> <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">*</span><span class="mi">3</span>   <span class="c1"># x is recalled from previous block</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">139</span><span class="p">]:</span> <span class="n">z</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">139</span><span class="p">]:</span> <span class="mi">6</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">142</span><span class="p">]:</span> <span class="k">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="mi">6</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">141</span><span class="p">]:</span> <span class="n">q</span> <span class="o">=</span> <span class="n">z</span><span class="p">[)</span>
<span class="c1"># this is a syntax error -- we trap ipy exceptions</span>
<span class="gt">------------------------------------------------------------</span>
<span class="gt">  File</span><span class="nn"> &quot;&lt;ipython console&gt;&quot;</span><span class="gt">, line </span><span class="mi">1</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">z</span><span class="p">[)</span>   <span class="c1"># this is a syntax error -- we trap ipy exceptions</span>
          <span class="o">^</span>
<span class="ne">SyntaxError</span>: invalid syntax
</pre>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
              <div class="section" id="multi-line-input">
                <h2>
                  Multi-line input<a
                    class="headerlink"
                    href="#multi-line-input"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>
                  Multi-line input is supported, and particularly lengthy blocks
                  of text can be parsed correctly.
                </p>
                <div class="highlight-ipython notranslate">
                  <table class="highlighttable">
                    <tr>
                      <td class="linenos">
                        <div class="linenodiv">
                          <pre>
1
2
3
4
5
6</pre
                          >
                        </div>
                      </td>
                      <td class="code">
                        <div class="highlight">
                          <pre><span></span><span class="gp">In [3]: </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://ichart.finance.yahoo.com/table.csv?s=CROX</span><span class="se">\</span>
<span class="gp">   ...: </span><span class="s1">&amp;d=9&amp;e=22&amp;f=2009&amp;g=d&amp;a=1&amp;br=8&amp;c=2006&amp;ignore=.csv&#39;</span>
<span class="gp">   ...: </span>

<span class="gp">In [4]: </span><span class="k">print</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">))</span>
<span class="go">[&#39;http://ichart.finance.yahoo.com/table.csv?s=CROX&#39;, &#39;d=9&#39;, &#39;e=22&#39;,</span>
</pre>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
              <div class="section" id="testing-directive-outputs">
                <h2>
                  Testing directive outputs<a
                    class="headerlink"
                    href="#testing-directive-outputs"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>
                  The extension supports a few limited parameters to configure
                  the running shell. These parameters are exposed as
                  reStructured text options to the
                  <code class="docutils literal notranslate"
                    ><span class="pre">..</span>
                    <span class="pre">ipython</span></code
                  >
                  directive, decorators for the source code directly, and
                  configurable options that are given directly to Sphinx in a
                  projects conf.py.
                </p>
                <p>
                  For example, you can put comments in your IPython sessions,
                  which are reported verbatim. There are some handy
                  “pseudo-decorators” that let you wrap a function with
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;doctest</span></code
                  >
                  and utilize the
                  <a
                    class="reference external"
                    href="https://docs.python.org/3/library/doctest.html#module-doctest"
                    title="(in Python v3.7)"
                    ><code class="xref py py-mod docutils literal notranslate"
                      ><span class="pre">doctest</span></code
                    ></a
                  >
                  module on the output.
                </p>
                <p>
                  The inputs are fed to an embedded IPython session and the
                  outputs are inserted into your documentation automatically.
                </p>
                <p>
                  If the output in your doc and the output from the embedded
                  shell don’t match on a
                  <a
                    class="reference external"
                    href="https://docs.python.org/3/library/doctest.html#module-doctest"
                    title="(in Python v3.7)"
                    ><code class="xref py py-mod docutils literal notranslate"
                      ><span class="pre">doctest</span></code
                    ></a
                  >
                  assertion, an error will occur.
                </p>
                <p>
                  If the
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;doctest</span></code
                  >
                  decorator is found, it will take these steps when your
                  documentation is built:
                </p>
                <ol class="arabic">
                  <li>
                    <p>
                      Execute the <em>input</em> lines in your IPython directive
                      block.
                    </p>
                  </li>
                  <li>
                    <p>
                      Compare the <em>output</em> of this with the output text
                      that you’ve put in the IPython directive block (I.E. what
                      comes after
                      <code class="docutils literal notranslate"
                        ><span class="pre">Out[NN]</span></code
                      >);
                    </p>
                  </li>
                  <li>
                    <p>
                      If there is a difference, the embedded shell will raise an
                      error and halt building the documentation.
                    </p>
                  </li>
                </ol>
                <div class="admonition-warning-is-error admonition">
                  <p class="admonition-title">Warning is Error</p>
                  <p>
                    All warnings are treated as errors in the default
                    configuration which will lead to frequent crashes while
                    building documentation. The option where this behavior can
                    be modified,
                    <code class="docutils literal notranslate"
                      ><span class="pre">ipython_warning_is_error</span></code
                    >
                    is displayed in the IPython Sphinx directive module section
                    at the bottom of the page.
                  </p>
                </div>
                <p>
                  You can
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;doctest</span></code
                  >
                  multi-line output as well. Just be careful when using
                  non-deterministic inputs like random numbers in the IPython
                  directive.
                </p>
                <p>
                  Because your inputs are run through a live interpreter, the
                  random numbers that are generated on the fly will likely
                  differ from run to run.
                </p>
                <p>
                  Therefore the output IPython will compare the present run to
                  will likely differ, raising errors and causing mayhem.
                </p>
                <p>How can we avoid this?</p>
                <p>
                  Here we “seed” the random number generator for deterministic
                  output, and we suppress the seed line so it doesn’t show up in
                  the rendered output.:
                </p>
                <div class="highlight-ipython notranslate">
                  <div class="highlight">
                    <pre><span></span><span class="gp">In [5]: </span><span class="kn">import</span> <span class="nn">numpy</span>
</pre>
                  </div>
                </div>
                <p>
                  For more information on
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;suppress</span></code
                  >
                  and
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;doctest</span></code
                  >
                  decorators, please refer to the end of this file in
                  <a class="reference internal" href="#pseudo-decorators"
                    ><span class="std std-ref">Decorators Glossary</span></a
                  >
                  section.
                </p>
                <div class="section" id="registering-your-own-doctest-handlers">
                  <h3>
                    Registering Your Own Doctest Handlers<a
                      class="headerlink"
                      href="#registering-your-own-doctest-handlers"
                      title="Permalink to this headline"
                      >¶</a
                    >
                  </h3>
                  <p>
                    The Sphinx extension that provides support for embedded
                    IPython code provides a pseudo-decorator
                    <code class="xref py py-obj docutils literal notranslate"
                      ><span class="pre">&#64;doctest</span></code
                    >, which treats the input/output block as a doctest, raising
                    a
                    <a
                      class="reference external"
                      href="https://docs.python.org/3/library/exceptions.html#RuntimeError"
                      title="(in Python v3.7)"
                      ><code class="xref py py-exc docutils literal notranslate"
                        ><span class="pre">RuntimeError</span></code
                      ></a
                    >
                    during doc generation if the actual output (after running
                    the input) does not match the expected output.
                  </p>
                  <p>An example usage is:</p>
                  <div class="highlight-rst notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4
5
6
7</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="p">..</span> <span class="ow">ipython</span><span class="p">::</span>

     In [1]: x = 1

     @doctest
     In [2]: x + 2
     Out[3]: 3
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>
                    One can also provide arguments to the decorator. The first
                    argument should be the name of a custom handler. The
                    specification of any other arguments is determined by the
                    handler. For example,
                  </p>
                  <div class="highlight-rst notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4
5</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="p">..</span> <span class="ow">ipython</span><span class="p">::</span>

   @doctest float
   In [154]: 0.1 + 0.2
   Out[154]: 0.3
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>
                    allows the actual output
                    <code class="docutils literal notranslate"
                      ><span class="pre">0.30000000000000004</span></code
                    >
                    to match the expected output due to a comparison with
                    <a
                      class="reference external"
                      href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html#numpy.allclose"
                      title="(in NumPy v1.17)"
                      ><code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">numpy.allclose</span></code
                      ></a
                    >.
                  </p>
                  <p>
                    This is detailed in the module
                    <a
                      class="reference internal"
                      href="custom_doctests.html#module-IPython.sphinxext.custom_doctests"
                      title="IPython.sphinxext.custom_doctests"
                      ><code class="xref py py-mod docutils literal notranslate"
                        ><span class="pre"
                          >IPython.sphinxext.custom_doctests</span
                        ></code
                      ></a
                    >.
                  </p>
                  <p>Handlers should have the following function signature:</p>
                  <div class="highlight-ipython notranslate">
                    <div class="highlight">
                      <pre><span></span><span class="n">handler</span><span class="p">(</span><span class="n">sphinx_shell</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">input_lines</span><span class="p">,</span> <span class="n">found</span><span class="p">,</span> <span class="n">submitted</span><span class="p">)</span>
</pre>
                    </div>
                  </div>
                  <dl class="glossary simple">
                    <dt id="term-sphinx-shell">sphinx_shell</dt>
                    <dd><p>Embedded Sphinx shell</p></dd>
                    <dt id="term-args">args</dt>
                    <dd>
                      <p>
                        The list of arguments that follow
                        <a
                          class="reference external"
                          href="mailto:'&#37;&#52;&#48;doctest"
                          >‘<span>&#64;</span>doctest</a
                        >
                        handler_name’,
                      </p>
                    </dd>
                    <dt id="term-input-lines">input_lines</dt>
                    <dd>
                      <p>
                        A list of the lines relevant to the current doctest,
                      </p>
                    </dd>
                    <dt id="term-found">found</dt>
                    <dd>
                      <p>
                        A string containing the output from the IPython shell
                      </p>
                    </dd>
                    <dt id="term-submitted">submitted</dt>
                    <dd>
                      <p>
                        A string containing the expected output from the IPython
                        shell.
                      </p>
                    </dd>
                  </dl>
                  <p>
                    Handlers must be registered in the
                    <code class="xref py py-obj docutils literal notranslate"
                      ><span class="pre">doctests</span></code
                    >
                    dict at the end of the
                    <a
                      class="reference internal"
                      href="custom_doctests.html#module-IPython.sphinxext.custom_doctests"
                      title="IPython.sphinxext.custom_doctests"
                      ><code class="xref py py-mod docutils literal notranslate"
                        ><span class="pre">custom_doctests</span></code
                      ></a
                    >
                    module.
                  </p>
                  <p>But here’s the sauce:</p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4
5</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="c1"># dict of allowable doctest handlers. The key represents the first argument</span>
<span class="c1"># that must be given to @doctest in order to activate the handler.</span>
<span class="n">doctests</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="n">float_doctest</span><span class="p">,</span>
<span class="p">}</span>
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>Another demonstration of multi-line input and output.:</p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="gp">In [6]: </span><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">jdh</span>

<span class="gp">In [7]: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">   ...: </span>    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">5</span>
<span class="go">6</span>
<span class="go">7</span>
<span class="go">8</span>
<span class="go">9</span>
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>
                    Most of the “pseudo-decorators” can be used as options to
                    IPython mode. For example, to setup matplotlib’s
                    <code class="docutils literal notranslate"
                      ><span class="pre">pylab</span></code
                    >
                    but suppress the output, you can set things up in the
                    following way.
                  </p>
                  <p>
                    When using the matplotlib
                    <code class="docutils literal notranslate"
                      ><span class="pre">use</span></code
                    >
                    directive, it should occur before any import of pylab. This
                    will not show up in the rendered docs, but the commands will
                    be executed in the embedded interpreter and subsequent line
                    numbers will be incremented to reflect the inputs:
                  </p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4
5</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="go">.. ipython::</span>
<span class="go">   :suppress:</span>

<span class="go">   In [144]: from matplotlib.pylab import *</span>
<span class="go">   In [145]: ion()</span>
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>
                    Likewise, you can set
                    <code class="docutils literal notranslate"
                      ><span class="pre">:doctest:</span></code
                    >
                    or
                    <code class="docutils literal notranslate"
                      ><span class="pre">:verbatim:</span></code
                    >
                    to apply these settings to the entire block. For example,
                  </p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="gp">In [8]: </span><span class="n">cd</span> <span class="n">mpl</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span>
<span class="go">/home/jdhunter/mpl/examples</span>

<span class="gp">In [9]: </span><span class="n">pwd</span>
<span class="gh">Out[9]: </span><span class="go">&#39;/home/jdhunter/mpl/examples&#39;</span>

<span class="gp">In [10]: </span><span class="n">cd</span> <span class="n">mpl</span><span class="o">/</span><span class="n">examples</span><span class="o">/&lt;</span><span class="n">TAB</span><span class="o">&gt;</span>
<span class="go">mpl/examples/animation/        mpl/examples/misc/</span>
<span class="go">mpl/examples/api/              mpl/examples/mplot3d/</span>
<span class="go">mpl/examples/axes_grid/        mpl/examples/pylab_examples/</span>
<span class="go">mpl/examples/event_handling/   mpl/examples/widgets</span>

<span class="gp">In [11]: </span><span class="n">cd</span> <span class="n">mpl</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">widgets</span><span class="o">/</span>
<span class="go">/home/msierig/mpl/examples/widgets</span>

<span class="gp">In [12]: </span><span class="o">!</span>wc *
<span class="go">    2    12    77 README.txt</span>
<span class="go">   40    97   884 buttons.py</span>
<span class="go">   26    90   712 check_buttons.py</span>
<span class="go">   19    52   416 cursor.py</span>
<span class="go">  180   404  4882 menu.py</span>
<span class="go">   16    45   337 multicursor.py</span>
<span class="go">   36   106   916 radio_buttons.py</span>
<span class="go">   48   226  2082 rectangle_selector.py</span>
<span class="go">   43   118  1063 slider_demo.py</span>
<span class="go">   40   124  1088 span_selector.py</span>
<span class="go">  450  1274 12457 total</span>
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>
                    You can create one or more pyplot plots and insert them with
                    the
                    <code class="xref py py-obj docutils literal notranslate"
                      ><span class="pre">&#64;savefig`</span></code
                    >
                    decorator.
                  </p>
                  <p>
                    For more information on
                    <code class="xref py py-obj docutils literal notranslate"
                      ><span class="pre">&#64;savefig</span></code
                    >
                    decorator, please refer to the end of this page in
                    <a class="reference internal" href="#pseudo-decorators"
                      ><span class="std std-ref">Decorators Glossary</span></a
                    >
                    section.
                  </p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="gp">In [13]: </span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span>

<span class="go"># use a semicolon to suppress the output</span>
<span class="gp">In [14]: </span><span class="n">hist</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10000</span><span class="p">),</span> <span class="mi">100</span><span class="p">);</span>
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <a
                    class="reference internal image-reference"
                    href="_images/plot_simple.png"
                    ><img
                      alt="_images/plot_simple.png"
                      src="_images/plot_simple.png"
                      style="width: 4in;"
                  /></a>
                  <a
                    class="reference internal image-reference"
                    href="_images/hist_simple.png"
                    ><img
                      alt="_images/hist_simple.png"
                      src="_images/hist_simple.png"
                      style="width: 4in;"
                  /></a>
                  <p>
                    In a subsequent session, we can update the current figure
                    with some text, and then resave.:
                  </p>
                  <pre class="literal-block">
In [15]: ylabel('number')
Out[15]: Text(38.347222222222214, 0.5, 'number')

In [16]: title('normal distribution')
Out[16]: Text(0.5, 1, 'normal distribution')

In [17]: grid(True)</pre
                  >
                  <a
                    class="reference internal image-reference"
                    href="_images/hist_with_text.png"
                    ><img
                      alt="_images/hist_with_text.png"
                      src="_images/hist_with_text.png"
                      style="width: 4in;"
                  /></a>
                  <p>
                    You can also have function definitions included in the
                    source.
                  </p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4
5
6
7
8
9</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="gp">In [18]: </span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="sd">&quot;&quot;&quot;</span>
<span class="gp">   ....: </span><span class="sd">    An overcomplicated square function as an example.</span>
<span class="gp">   ....: </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">   ....: </span>    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">   ....: </span>        <span class="n">x</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="n">y</span>
<span class="gp">   ....: </span>
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>Then call it from a subsequent section.</p>
                  <pre class="literal-block">
In [19]: square(3)
Out[19]: 9

In [20]: square(-2)
Out[20]: 4</pre
                  >
                  <p>
                    <strong
                      >Why does the sentence below appear no less than 3 times
                      in this doc?</strong
                    >
                  </p>
                  <p>
                    For more information on the
                    <code class="docutils literal notranslate"
                      ><span class="pre">&#64;doctest</span></code
                    >
                    decorator, please refer to the end of this page in the
                    <a class="reference internal" href="#pseudo-decorators"
                      ><span class="std std-ref">Decorators Glossary</span></a
                    >
                    section.
                  </p>
                </div>
                <div class="section" id="writing-pure-python-code">
                  <h3>
                    Writing Pure Python Code<a
                      class="headerlink"
                      href="#writing-pure-python-code"
                      title="Permalink to this headline"
                      >¶</a
                    >
                  </h3>
                  <p>
                    Pure python code is supported by the optional argument
                    <code class="xref py py-obj docutils literal notranslate"
                      ><span class="pre">python</span></code
                    >. In this pure python syntax you do not include the output
                    from the python interpreter. The following markup:
                  </p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4
5
6</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="o">..</span> <span class="n">ipython</span><span class="p">::</span> <span class="n">python</span>

   <span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
   <span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
   <span class="n">foo</span> <span class="o">=</span> <span class="mi">2</span>
   <span class="n">foo</span><span class="o">**</span><span class="mi">2</span>
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>Renders as</p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4
5
6
7
8
9</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="gp">In [21]: </span><span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>

<span class="gp">In [22]: </span><span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">bar</span>

<span class="gp">In [23]: </span><span class="n">foo</span> <span class="o">=</span> <span class="mi">2</span>

<span class="gp">In [24]: </span><span class="n">foo</span><span class="o">**</span><span class="mi">2</span>
<span class="gh">Out[24]: </span><span class="go">4</span>
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <p>
                    We can even plot from python, using the
                    <code class="xref py py-obj docutils literal notranslate"
                      ><span class="pre">&#64;savefig</span></code
                    >
                    decorator, as well as suppress output with a semicolon.:
                  </p>
                  <div class="highlight-ipython notranslate">
                    <div class="highlight">
                      <pre><span></span><span class="gp">In [25]: </span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span>
</pre>
                    </div>
                  </div>
                  <a
                    class="reference internal image-reference"
                    href="_images/plot_simple_python.png"
                    ><img
                      alt="_images/plot_simple_python.png"
                      src="_images/plot_simple_python.png"
                      style="width: 4in;"
                  /></a>
                  <p>
                    For more information on
                    <code class="xref py py-obj docutils literal notranslate"
                      ><span class="pre">&#64;savefig</span></code
                    >
                    decorator, please refer to the end of this page in
                    Pseudo-Decorators section.
                  </p>
                  <p>
                    Similarly,
                    <a
                      class="reference external"
                      href="https://docs.python.org/3/library/sys.html#sys.stderr"
                      title="(in Python v3.7)"
                      ><code
                        class="xref py py-data docutils literal notranslate"
                        ><span class="pre">sys.stderr</span></code
                      ></a
                    >
                    is inserted.:
                  </p>
                  <div class="highlight-ipython notranslate">
                    <table class="highlighttable">
                      <tr>
                        <td class="linenos">
                          <div class="linenodiv">
                            <pre>
1
2
3
4
5
6
7</pre
                            >
                          </div>
                        </td>
                        <td class="code">
                          <div class="highlight">
                            <pre><span></span><span class="gp">In [26]: </span><span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>

<span class="gp">In [27]: </span><span class="n">foo</span><span class="p">[)</span>
<span class="gt">  File</span><span class="nn"> &quot;&lt;ipython-input-27-edde7a2425af&gt;&quot;</span><span class="gt">, line </span><span class="mi">1</span>
    <span class="n">foo</span><span class="p">[)</span>
        <span class="o">^</span>
<span class="ne">SyntaxError</span>: invalid syntax
</pre>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
              <div class="section" id="handling-comments">
                <h2>
                  Handling Comments<a
                    class="headerlink"
                    href="#handling-comments"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>Comments are handled and state is preserved.:</p>
                <div class="highlight-ipython notranslate">
                  <table class="highlighttable">
                    <tr>
                      <td class="linenos">
                        <div class="linenodiv">
                          <pre>
1
2
3</pre
                          >
                        </div>
                      </td>
                      <td class="code">
                        <div class="highlight">
                          <pre><span></span><span class="go"># comments are handled</span>
<span class="gp">In [28]: </span><span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">bar</span>
</pre>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
                <p>
                  The following section attempts to execute faulty code, namely
                  the calling the functions
                  <code class="docutils literal notranslate"
                    ><span class="pre">ioff()</span></code
                  >
                  and
                  <code class="docutils literal notranslate"
                    ><span class="pre">ion</span></code
                  >
                  which haven’t been defined.
                </p>
                <p>
                  If you don’t see the next code block then we can surmise that
                  the
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;suppress</span></code
                  >
                  decorator is behaving as expected.:
                </p>
              </div>
              <div
                class="section"
                id="splitting-python-statements-across-lines"
              >
                <h2>
                  Splitting Python statements across lines<a
                    class="headerlink"
                    href="#splitting-python-statements-across-lines"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>Multi-line input is handled.:</p>
                <div class="highlight-ipython notranslate">
                  <table class="highlighttable">
                    <tr>
                      <td class="linenos">
                        <div class="linenodiv">
                          <pre>
1
2
3
4
5
6
7
8</pre
                          >
                        </div>
                      </td>
                      <td class="code">
                        <div class="highlight">
                          <pre><span></span><span class="gp">In [29]: </span><span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;Multi</span><span class="se">\</span>
<span class="gp">   ....: </span><span class="s1">        line &amp;</span><span class="se">\</span>
<span class="gp">   ....: </span><span class="s1">        support &amp;</span><span class="se">\</span>
<span class="gp">   ....: </span><span class="s1">        works&#39;</span>
<span class="gp">   ....: </span>

<span class="gp">In [30]: </span><span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">))</span>
<span class="go">[&#39;Multi        line &#39;, &#39;        support &#39;, &#39;        works&#39;]</span>
</pre>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
                <p>Functions definitions are correctly parsed.:</p>
                <div class="highlight-ipython notranslate">
                  <table class="highlighttable">
                    <tr>
                      <td class="linenos">
                        <div class="linenodiv">
                          <pre>
1
2
3
4
5
6
7
8
9</pre
                          >
                        </div>
                      </td>
                      <td class="code">
                        <div class="highlight">
                          <pre><span></span><span class="gp">In [31]: </span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="sd">&quot;&quot;&quot;</span>
<span class="gp">   ....: </span><span class="sd">    An overcomplicated square function as an example.</span>
<span class="gp">   ....: </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">   ....: </span>    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">   ....: </span>        <span class="n">x</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="n">y</span>
<span class="gp">   ....: </span>
</pre>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
                <p>And persist across sessions.:</p>
                <pre class="literal-block">
In [32]: print(square(3))
9

In [33]: print(square(-2))
4</pre
                >
              </div>
              <div class="section" id="configuring-the-build-environment">
                <h2>
                  Configuring the Build Environment<a
                    class="headerlink"
                    href="#configuring-the-build-environment"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>
                  I want to put this in the docstrings of those functions with
                  the
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">env</span></code
                  >
                  parameter that kept tripping me up. (ref)
                </p>
                <dl class="glossary simple">
                  <dt id="term-environment">environment</dt>
                  <dd>
                    <p>
                      A structure where information about all documents under
                      the root is saved, and used for cross-referencing. The
                      environment is pickled after the parsing stage, so that
                      successive runs only need to read and parse new and
                      changed documents.
                    </p>
                  </dd>
                </dl>
              </div>
              <div class="section" id="supported-pseudo-decorators">
                <h2>
                  Supported Pseudo-Decorators<a
                    class="headerlink"
                    href="#supported-pseudo-decorators"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>
                  Here are the supported decorators, and any optional arguments
                  they take. Some of the decorators can be used as options to
                  the entire block (e.g.
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;verbatim</span></code
                  >
                  and
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;suppress</span></code
                  >), and some only apply to the line just below them (eg
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">&#64;savefig</span></code
                  >).:
                </p>
                <div class="section" id="decorators-glossary">
                  <span id="pseudo-decorators"></span>
                  <h3>
                    Decorators Glossary<a
                      class="headerlink"
                      href="#decorators-glossary"
                      title="Permalink to this headline"
                      >¶</a
                    >
                  </h3>
                  <dl class="glossary simple">
                    <dt id="term-suppress">&#64;suppress</dt>
                    <dd>
                      <p>
                        Execute the IPython input block, but
                        <em class="dfn">&#64;suppress</em> the input and output
                        block from the rendered output. Also, can be applied to
                        the entire
                        <code class="docutils literal notranslate"
                          ><span class="pre">..</span>
                          <span class="pre">ipython</span></code
                        >
                        block as a directive option with
                        <code class="docutils literal notranslate"
                          ><span class="pre">:suppress:</span></code
                        >.
                      </p>
                    </dd>
                    <dt id="term-verbatim">&#64;verbatim</dt>
                    <dd>
                      <p>
                        Insert the input and output block in
                        <em class="dfn">&#64;verbatim</em>, but auto-increment
                        the line numbers. Internally, the interpreter will be
                        fed an empty string, so it is a no-op that keeps line
                        numbering consistent. Also, can be applied to the entire
                        <code class="docutils literal notranslate"
                          ><span class="pre">..</span>
                          <span class="pre">ipython</span></code
                        >
                        block as a directive option with
                        <code class="docutils literal notranslate"
                          ><span class="pre">:verbatim:</span></code
                        >.
                      </p>
                    </dd>
                    <dt id="term-savefig">&#64;savefig</dt>
                    <dd>
                      <p>
                        Save the target of the directive to
                        <em class="dfn">outfile</em>.
                        <em
                          >I think I’m just gonna rewrite this entire
                          paragraph.</em
                        >
                        Save the figure to the static directory and insert it
                        into the document, possibly binding it into a mini-page
                        and/or putting code/figure label/references to associate
                        the code and the figure. Takes args to pass to the image
                        directive (<em>scale</em>,
                        <em>width</em>, etc can be
                        <code class="docutils literal notranslate"
                          ><span class="pre">**kwargs</span></code
                        >)
                      </p>
                    </dd>
                    <dt id="term-doctest">&#64;doctest</dt>
                    <dd>
                      <p>
                        Compare the pasted in output in the IPython block with
                        the output generated at doc build time, and raise errors
                        if they don’t match. Also, can be applied to the entire
                        <code class="docutils literal notranslate"
                          ><span class="pre">..</span>
                          <span class="pre">ipython</span></code
                        >
                        block as a directive option with
                        <code class="docutils literal notranslate"
                          ><span class="pre">:doctest:</span></code
                        >.
                      </p>
                    </dd>
                    <dt id="term-0">&#64;suppress</dt>
                    <dd>
                      <p>
                        execute the ipython input block, but suppress the input
                        and output block from the rendered output. Also, can be
                        applied to the entire
                        <code class="docutils literal notranslate"
                          ><span class="pre">..ipython</span></code
                        >
                        block as a directive option with
                        <code class="docutils literal notranslate"
                          ><span class="pre">:suppress:</span></code
                        >.
                      </p>
                    </dd>
                    <dt id="term-okexcept">&#64;okexcept</dt>
                    <dd><p>Actually is this a decorator?</p></dd>
                    <dt id="term-okwarning">&#64;okwarning</dt>
                    <dd><p>What about this one?</p></dd>
                    <dt id="term-python">&#64;python</dt>
                    <dd><p>This can’t be.</p></dd>
                  </dl>
                </div>
              </div>
              <div class="section" id="configuration-values">
                <span id="id7"></span>
                <h2>
                  Configuration Values<a
                    class="headerlink"
                    href="#configuration-values"
                    title="Permalink to this headline"
                    >¶</a
                  >
                </h2>
                <p>
                  The configurable options that can be placed in conf.py are:
                </p>
                <dl class="confval">
                  <dt id="confval-ipython_savefig_dir">
                    <code class="sig-name descname">ipython_savefig_dir</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_savefig_dir"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      The directory in which to save the figures. This is
                      relative to the Sphinx source directory. The default is
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">html_static_path</span></code
                      >.
                    </p>
                  </dd>
                </dl>

                <dl class="confval">
                  <dt id="confval-ipython_rgxin">
                    <code class="sig-name descname">ipython_rgxin</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_rgxin"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      The compiled regular expression to denote the start of
                      IPython input lines. The default is
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">re.compile('In</span>
                        <span class="pre">\[(\d+)\]:\s?(.*)\s*')</span></code
                      >. You shouldn’t need to change this.
                    </p>
                  </dd>
                </dl>

                <dl class="confval">
                  <dt id="confval-ipython_warning_is_error:[defaulttoTrue]">
                    <code class="sig-name descname"
                      >ipython_warning_is_error: [default to True]</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_warning_is_error:[defaulttoTrue]"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      Fail the build if something unexpected happen, for example
                      if a block raise an exception but does not have the
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">:okexcept:</span></code
                      >
                      flag. The exact behavior of what is considered strict, may
                      change between the sphinx directive version.
                    </p>
                  </dd>
                </dl>

                <dl class="confval">
                  <dt id="confval-ipython_rgxout">
                    <code class="sig-name descname">ipython_rgxout</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_rgxout"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      The compiled regular expression to denote the start of
                      IPython output lines. The default is
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre"
                          >re.compile('Out\[(\d+)\]:\s?(.*)\s*')</span
                        ></code
                      >. You shouldn’t need to change this.
                    </p>
                  </dd>
                </dl>

                <dl class="confval">
                  <dt id="confval-ipython_promptin">
                    <code class="sig-name descname">ipython_promptin</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_promptin"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      The string to represent the IPython input prompt in the
                      generated ReST. The default is
                      <code class="docutils literal notranslate"
                        ><span class="pre">'In</span>
                        <span class="pre">[%d]:'</span></code
                      >. This expects that the line numbers are used in the
                      prompt.
                    </p>
                  </dd>
                </dl>

                <dl class="confval">
                  <dt id="confval-ipython_promptout">
                    <code class="sig-name descname">ipython_promptout</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_promptout"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      The string to represent the IPython prompt in the
                      generated ReST. The default is
                      <code class="docutils literal notranslate"
                        ><span class="pre">'Out</span>
                        <span class="pre">[%d]:'</span></code
                      >. This expects that the line numbers are used in the
                      prompt.
                    </p>
                  </dd>
                </dl>

                <dl class="confval">
                  <dt id="confval-ipython_mplbackend">
                    <code class="sig-name descname">ipython_mplbackend</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_mplbackend"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      The string which specifies if the embedded Sphinx shell
                      should import Matplotlib and set the backend. The value
                      specifies a backend that is passed to
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">matplotlib.use()</span></code
                      >
                      before any lines in
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">ipython_execlines</span></code
                      >
                      are executed. If not specified in conf.py, then the
                      default value of ‘agg’ is used. To use the IPython
                      directive without matplotlib as a dependency, set the
                      value to
                      <a
                        class="reference external"
                        href="https://docs.python.org/3/library/constants.html#None"
                        title="(in Python v3.7)"
                        ><code
                          class="xref py py-obj docutils literal notranslate"
                          ><span class="pre">None</span></code
                        ></a
                      >. It may end up that matplotlib is still imported if the
                      user specifies so in
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">ipython_execlines</span></code
                      >
                      or makes use of the
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">&#64;savefig</span></code
                      >
                      pseudo decorator.
                    </p>
                  </dd>
                </dl>

                <dl class="confval">
                  <dt id="confval-ipython_execlines">
                    <code class="sig-name descname">ipython_execlines</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_execlines"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      A list of strings to be exec’d in the embedded Sphinx
                      shell. Typical usage is to make certain packages always
                      available. Set this to an empty list if you wish to have
                      no imports always available. If specified in
                      <code class="docutils literal notranslate"
                        ><span class="pre">conf.py</span></code
                      >
                      as
                      <a
                        class="reference external"
                        href="https://docs.python.org/3/library/constants.html#None"
                        title="(in Python v3.7)"
                        ><code
                          class="xref py py-obj docutils literal notranslate"
                          ><span class="pre">None</span></code
                        ></a
                      >, then it has the effect of making no imports available.
                    </p>
                    <p>
                      If omitted from conf.py altogether, then the default value
                      of:
                    </p>
                    <div class="highlight-ipython notranslate">
                      <div class="highlight">
                        <pre><span></span><span class="p">[</span><span class="s1">&#39;import numpy as np&#39;</span><span class="p">,</span> <span class="s1">&#39;import matplotlib.pyplot as plt&#39;</span><span class="p">]</span>
</pre>
                      </div>
                    </div>
                    <p>is used.</p>
                  </dd>
                </dl>

                <dl class="confval">
                  <dt id="confval-ipython_holdcount">
                    <code class="sig-name descname">ipython_holdcount</code
                    ><a
                      class="headerlink"
                      href="#confval-ipython_holdcount"
                      title="Permalink to this definition"
                      >¶</a
                    >
                  </dt>
                  <dd>
                    <p>
                      When the
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">&#64;suppress</span></code
                      >
                      pseudo-decorator is used, the execution count can be
                      incremented or not. The default behavior is to hold the
                      execution count, corresponding to a value of
                      <a
                        class="reference external"
                        href="https://docs.python.org/3/library/constants.html#True"
                        title="(in Python v3.7)"
                        ><code
                          class="xref py py-obj docutils literal notranslate"
                          ><span class="pre">True</span></code
                        ></a
                      >. Set this to
                      <a
                        class="reference external"
                        href="https://docs.python.org/3/library/constants.html#False"
                        title="(in Python v3.7)"
                        ><code
                          class="xref py py-obj docutils literal notranslate"
                          ><span class="pre">False</span></code
                        ></a
                      >
                      to increment the execution count after each suppressed
                      command.
                    </p>
                  </dd>
                </dl>

                <p>
                  As an example, to use the IPython directive when
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">matplotlib</span></code
                  >
                  is not available, one sets the backend to
                  <a
                    class="reference external"
                    href="https://docs.python.org/3/library/constants.html#None"
                    title="(in Python v3.7)"
                    ><code class="xref py py-obj docutils literal notranslate"
                      ><span class="pre">None</span></code
                    ></a
                  >:
                </p>
                <blockquote>
                  <div>
                    <p>
                      <code class="xref py py-obj docutils literal notranslate"
                        ><span class="pre">ipython_mplbackend</span></code
                      >
                      =
                      <a
                        class="reference external"
                        href="https://docs.python.org/3/library/constants.html#None"
                        title="(in Python v3.7)"
                        ><code
                          class="xref py py-obj docutils literal notranslate"
                          ><span class="pre">None</span></code
                        ></a
                      >
                    </p>
                  </div>
                </blockquote>
                <p>
                  To view the API documentation, continue reading at
                  <code class="xref py py-obj docutils literal notranslate"
                    ><span class="pre">sphinx_ipython_api</span></code
                  >.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
          <div id="searchbox" style="display: none" role="search">
            <h3>Quick search</h3>
            <div class="searchformwrapper">
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
              </form>
            </div>
          </div>
          <script type="text/javascript">
            $("#searchbox").show(0);
          </script>
          <h3>Related Topics</h3>
          <ul>
            <li>
              <a href="index.html">Documentation overview</a>
              <ul>
                <li>
                  Previous:
                  <a href="subcommands.html" title="previous chapter"
                    >Subcommands in IPython and Jupyter</a
                  >
                </li>
                <li>
                  Next:
                  <a href="lexer.html" title="next chapter"
                    >New IPython Console Lexer</a
                  >
                </li>
              </ul>
            </li>
          </ul>

          <h3><a href="index.html">Table of Contents</a></h3>

          <div>&nbsp;</div>
          <div id="sidebartoc">
            <p class="caption"><span class="caption-text">Tutorial</span></p>
            <ul class="current">
              <li class="toctree-l1">
                <a class="reference internal" href="jobcontrol.html"
                  >Job Control</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="exceptions.html"
                  >Customized Exceptions</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="subcommands.html"
                  >Subcommands in IPython and Jupyter</a
                >
              </li>
              <li class="toctree-l1 current">
                <a class="current reference internal" href="#"
                  >IPython Sphinx Directive</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="lexer.html"
                  >New IPython Console Lexer</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="sphinx_api_docs.html"
                  >Sphinx API docs</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="custom_doctests.html"
                  >Custom Doctests</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="dev.html"
                  >Developers Notes</a
                >
              </li>
            </ul>
            <p class="caption"><span class="caption-text">API</span></p>
            <ul>
              <li class="toctree-l1">
                <a class="reference internal" href="startup/index.html"
                  >IPython API</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="util/index.html"
                  >IPython Utilities</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="kernel.html"
                  >IPython Kernel</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="jupyter/index.html"
                  >jupyter</a
                >
              </li>
              <li class="toctree-l1">
                <a class="reference internal" href="extensions.html"
                  >Extensions</a
                >
              </li>
            </ul>
          </div>

          <div role="note" aria-label="source link">
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li>
                <a href="_sources/sphinxext.rst.txt" rel="nofollow"
                  >Show Source</a
                >
              </li>
            </ul>
          </div>

          <h3><a href="index.html">On This Page:</a></h3>

          <div>&nbsp;</div>
          <div id="sidebartoc">
            <ul>
              <li>
                <a class="reference internal" href="#"
                  >IPython Sphinx Directive</a
                >
                <ul>
                  <li>
                    <a class="reference internal" href="#directive-and-options"
                      >Directive and options</a
                    >
                    <ul>
                      <li>
                        <a class="reference internal" href="#see-also"
                          >See Also</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li>
                    <a class="reference internal" href="#directive-usage"
                      >Directive Usage</a
                    >
                  </li>
                  <li>
                    <a
                      class="reference internal"
                      href="#persisting-the-session-across-ipython-directive-blocks"
                      >Persisting the session across IPython directive blocks</a
                    >
                  </li>
                  <li>
                    <a class="reference internal" href="#multi-line-input"
                      >Multi-line input</a
                    >
                  </li>
                  <li>
                    <a
                      class="reference internal"
                      href="#testing-directive-outputs"
                      >Testing directive outputs</a
                    >
                    <ul>
                      <li>
                        <a
                          class="reference internal"
                          href="#registering-your-own-doctest-handlers"
                          >Registering Your Own Doctest Handlers</a
                        >
                      </li>
                      <li>
                        <a
                          class="reference internal"
                          href="#writing-pure-python-code"
                          >Writing Pure Python Code</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li>
                    <a class="reference internal" href="#handling-comments"
                      >Handling Comments</a
                    >
                  </li>
                  <li>
                    <a
                      class="reference internal"
                      href="#splitting-python-statements-across-lines"
                      >Splitting Python statements across lines</a
                    >
                  </li>
                  <li>
                    <a
                      class="reference internal"
                      href="#configuring-the-build-environment"
                      >Configuring the Build Environment</a
                    >
                  </li>
                  <li>
                    <a
                      class="reference internal"
                      href="#supported-pseudo-decorators"
                      >Supported Pseudo-Decorators</a
                    >
                    <ul>
                      <li>
                        <a
                          class="reference internal"
                          href="#decorators-glossary"
                          >Decorators Glossary</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li>
                    <a class="reference internal" href="#configuration-values"
                      >Configuration Values</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index">index</a>
        </li>
        <li class="right">
          <a href="py-modindex.html" title="Python Module Index">modules</a> |
        </li>
        <li class="right">
          <a href="lexer.html" title="New IPython Console Lexer">next</a> |
        </li>
        <li class="right">
          <a href="subcommands.html" title="Subcommands in IPython and Jupyter"
            >previous</a
          >
          |
        </li>
        <li class="nav-item nav-item-0">
          <a href="index.html">Dynamic IPython</a> &#187;
        </li>
      </ul>
    </div>
    <div class="footer" role="contentinfo">
      Last updated on Oct 04, 2019.
    </div>
  </body>
</html>
