
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>3. Keybindings in IPython &#8212; Dynamic IPython 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/data/data/com.termux/files/home/projects/dynamic_ipython/docs/_static/pyramid.css_t" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Keyboard Shortcut Customization" href="custom_keyboard_shortcuts.html" />
    <link rel="prev" title="2. Configuring Prompt Toolkit in IPython" href="basic_customization.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="custom_keyboard_shortcuts.html" title="4. Keyboard Shortcut Customization"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="basic_customization.html" title="2. Configuring Prompt Toolkit in IPython"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Dynamic IPython 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-ipython_keybindings">
<span id="keybindings-in-ipython"></span><span id="ipython-keybindings"></span><h1>3. Keybindings in IPython<a class="headerlink" href="#module-ipython_keybindings" title="Permalink to this headline">¶</a></h1>
<div class="section" id="run-in-shell">
<h2>3.1. Run in shell<a class="headerlink" href="#run-in-shell" title="Permalink to this headline">¶</a></h2>
<p>If we would like to add extra keybindings to the IPython shell, we can utilize
a few functions built into the <a class="reference external" href="https://ipython.readthedocs.io/en/stable/api/generated/IPython.terminal.interactiveshell.html#module-IPython.terminal.interactiveshell" title="(in IPython v7.5.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">IPython.terminal.interactiveshell</span></code></a> module,
in addition, to utilizing the expansive <code class="xref py py-mod docutils literal notranslate"><span class="pre">prompt_toolkit</span></code> library.</p>
<p>First we’ll initialize a global instance of the shell.</p>
<p>Then import the function <code class="xref py py-func docutils literal notranslate"><span class="pre">create_ipython_shortcuts()</span></code>
and initialize a <code class="xref py py-class docutils literal notranslate"><span class="pre">KeyBindings</span></code>
instance.</p>
<p>The attributes associated with <code class="xref py py-func docutils literal notranslate"><span class="pre">create_ipython_shortcuts()</span></code>
are as follows:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">get_ipython</span>
<span class="gp">   ...: </span><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">IPython.terminal.interactiveshell</span> <span class="kn">import</span> <span class="n">create_ipython_shortcuts</span>
<span class="gp">   ...: </span><span class="o">&gt;&gt;&gt;</span> <span class="n">ip</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span>
<span class="gp">   ...: </span><span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">create_ipython_shortcuts</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="o">&gt;&gt;&gt;</span> <span class="c1"># This will give you the following methods</span>
<span class="gp">   ...: </span><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
<span class="gp">   ...: </span>    <span class="p">[</span><span class="s1">&#39;_KeyBindings__version&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="o">...</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;_abc_impl&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;_clear_cache&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;_get_bindings_for_keys_cache&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;_get_bindings_starting_with_keys_cache&#39;</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;_version&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;add&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;add_binding&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;bindings&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;get_bindings_for_keys&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;get_bindings_starting_with_keys&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;remove&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;remove_binding&#39;</span><span class="p">]</span>
<span class="gp">   ...: </span>
<span class="gt">  File</span><span class="nn"> &quot;&lt;ipython-input-1-0ad2178af322&gt;&quot;</span><span class="gt">, line </span><span class="mi">7</span>
    <span class="p">[</span><span class="s1">&#39;_KeyBindings__version&#39;</span><span class="p">,</span>
    <span class="o">^</span>
<span class="ne">IndentationError</span>: unexpected indent
</pre></div>
</div>
<p>That file also gives a good example of how to bind keys.</p>
</div>
<div class="section" id="original-file-implementation">
<h2>3.2. Original File Implementation<a class="headerlink" href="#original-file-implementation" title="Permalink to this headline">¶</a></h2>
<p>Go to the IPython root dir. This could be named something to the effect of
<a class="reference external" href="~/miniconda3/lib/python3.7/site-packages/IPython/">~/miniconda3/lib/python3.7/site-packages/IPython/</a></p>
<p>To find it programtically, one can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">IPython.paths</span> <span class="k">import</span> <span class="n">get_ipython_package_dir</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">get_ipython_package_dir</span><span class="p">())</span>
</pre></div>
</div>
<p>Then navigate to the root of that directory.</p>
<p><code class="docutils literal notranslate"><span class="pre">%cd</span> <span class="pre">/usr/lib/python3.7/site-packages/IPython</span></code></p>
<p>Go to the terminal package.
<code class="docutils literal notranslate"><span class="pre">%cd</span> <span class="pre">terminal</span></code>
<code class="docutils literal notranslate"><span class="pre">%pycat</span> <span class="pre">shortcuts</span></code></p>
<p>Up at the top you have the keybindings <a class="reference external" href="https://ipython.readthedocs.io/en/stable/api/generated/IPython.html#module-IPython" title="(in IPython v7.5.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">IPython</span></code></a> ships with listed
for ya!</p>
</div>
<div class="section" id="official-ipython-documentation">
<h2>3.3. Official IPython Documentation<a class="headerlink" href="#official-ipython-documentation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">prompt_toolkit.key_binding.registry</span> <span class="k">import</span> <span class="n">Registry</span>
<span class="kn">from</span> <span class="nn">prompt_toolkit.key_binding.defaults</span> <span class="k">import</span> <span class="n">load_key_bindings</span>
<span class="kn">from</span> <span class="nn">IPython</span> <span class="k">import</span> <span class="n">get_ipython</span>
<span class="kn">from</span> <span class="nn">prompt_toolkit.enums</span> <span class="k">import</span> <span class="n">DEFAULT_BUFFER</span>
<span class="kn">from</span> <span class="nn">prompt_toolkit.keys</span> <span class="k">import</span> <span class="n">Keys</span>
<span class="kn">from</span> <span class="nn">prompt_toolkit.filters</span> <span class="k">import</span> <span class="n">HasFocus</span><span class="p">,</span> <span class="n">HasSelection</span><span class="p">,</span> <span class="n">ViInsertMode</span>
<span class="n">ip</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span>
<span class="n">insert_mode</span> <span class="o">=</span> <span class="n">ViInsertMode</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">insert_unexpected</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;From the IPython examples on keybinding configuration.&quot;&quot;&quot;</span>
    <span class="n">buf</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">current_buffer</span>
    <span class="n">buf</span><span class="o">.</span><span class="n">insert_text</span><span class="p">(</span><span class="s1">&#39;The Spanish Inquisition&#39;</span><span class="p">)</span>
    <span class="c1"># Register the shortcut if IPython is using prompt_toolkit</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="s1">&#39;pt_cli&#39;</span><span class="p">):</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="n">ip</span><span class="o">.</span><span class="n">pt_cli</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">key_bindings_registry</span>

        <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlN</span><span class="p">,</span>
                 <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                              <span class="o">&amp;</span> <span class="o">~</span><span class="n">HasSelection</span><span class="p">()</span>
                         <span class="o">&amp;</span> <span class="n">insert_mode</span><span class="p">))(</span><span class="n">insert_unexpected</span><span class="p">)</span>
</pre></div>
</div>
<p>Continue on in this fashion for as long as you need IPython barely comes
with any keybindings. I’m going to drop 1 that I thought was interesting
though.
<em>Also because i didn’t know or remember these were keybindings.</em></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ctrl+J == Enter, seemingly</span>
<span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlJ</span><span class="p">,</span>
                     <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                     <span class="o">&amp;</span> <span class="o">~</span><span class="n">HasSelection</span><span class="p">()</span>
                     <span class="o">&amp;</span> <span class="n">insert_mode</span>
                     <span class="p">))</span>
                     <span class="p">(</span><span class="n">return_handler</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="pure-prompt-toolkit-way-of-rebinding-keys">
<h3>3.3.1. Pure Prompt Toolkit Way of Rebinding Keys<a class="headerlink" href="#pure-prompt-toolkit-way-of-rebinding-keys" title="Permalink to this headline">¶</a></h3>
<p>From the pt docs:</p>
<blockquote>
<div><p>It is also possible to combine multiple registries. We do this in the default
key bindings. There are some registries that contain Emacs bindings, while
others contain the Vi bindings. They are merged together using a <code class="docutils literal notranslate"><span class="pre">MergedRegistry</span></code>.</p>
<p>We also have a <code class="docutils literal notranslate"><span class="pre">ConditionalRegistry</span></code> object that can enable/disable a group
of key bindings at once.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">Registry</span><span class="p">()</span>

<span class="nd">@r</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlX</span><span class="p">,</span> <span class="n">Keys</span><span class="o">.</span><span class="n">ControlC</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">INSERT</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A quick snippet to give you a flavor of the syntax.</span>

<span class="sd">    Gotta figure out what&#39;s up with that filter param over there.</span>
<span class="sd">    02/24/2019: The ``filter`` parameter is optional it just helps specify things.</span>

<span class="sd">    Luckily I think that keybindings actually don&#39;t need function bodies</span>
<span class="sd">    The decorator&#39;s doing all the heavy lifting for ya! I think...</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Handle ControlX-ControlC key sequence.</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">check_defaults</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;What are the default keybindings we have here?</span>

<span class="sd">    Err I suppose I should say what does Prompt Toolkit export by default</span>
<span class="sd">    because I&#39;m not 100% sure that ip imports everything or doesn&#39;t modify</span>
<span class="sd">    anything along the way.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="n">load_key_bindings</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">registry</span><span class="o">.</span><span class="n">key_bindings</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="source-code-for-creating-ipython-shortcuts">
<h2>3.4. Source code for creating IPython shortcuts<a class="headerlink" href="#source-code-for-creating-ipython-shortcuts" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="k">pycat</span> shortcuts.py
<span class="go">Error: no such file, variable, URL, history range or macro</span>
</pre></div>
</div>
<p>Module to define and register Terminal IPython shortcuts with
<code class="xref py py-mod docutils literal notranslate"><span class="pre">prompt_toolkit</span></code></p>
<p>Copyright (c) IPython Development Team.
Distributed under the terms of the Modified BSD License.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">signal</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Callable</span>

<span class="kn">from</span> <span class="nn">prompt_toolkit.enums</span> <span class="k">import</span> <span class="n">DEFAULT_BUFFER</span><span class="p">,</span> <span class="n">SEARCH_BUFFER</span>
<span class="kn">from</span> <span class="nn">prompt_toolkit.filters</span> <span class="k">import</span> <span class="p">(</span><span class="n">HasFocus</span><span class="p">,</span> <span class="n">HasSelection</span><span class="p">,</span> <span class="n">Condition</span><span class="p">,</span>
    <span class="n">ViInsertMode</span><span class="p">,</span> <span class="n">EmacsInsertMode</span><span class="p">,</span> <span class="n">HasCompletions</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">prompt_toolkit.filters.cli</span> <span class="k">import</span> <span class="n">ViMode</span><span class="p">,</span> <span class="n">ViNavigationMode</span>
<span class="kn">from</span> <span class="nn">prompt_toolkit.keys</span> <span class="k">import</span> <span class="n">Keys</span>
<span class="kn">from</span> <span class="nn">prompt_toolkit.key_binding.bindings.completion</span> <span class="k">import</span> <span class="n">display_completions_like_readline</span>

<span class="kn">from</span> <span class="nn">IPython.utils.decorators</span> <span class="k">import</span> <span class="n">undoc</span>

<span class="nd">@undoc</span>
<span class="nd">@Condition</span>
<span class="k">def</span> <span class="nf">cursor_in_leading_ws</span><span class="p">(</span><span class="n">cli</span><span class="p">):</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">cli</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">document</span><span class="o">.</span><span class="n">current_line_before_cursor</span>
    <span class="k">return</span> <span class="p">(</span><span class="ow">not</span> <span class="n">before</span><span class="p">)</span> <span class="ow">or</span> <span class="n">before</span><span class="o">.</span><span class="n">isspace</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">register_ipython_shortcuts</span><span class="p">(</span><span class="n">registry</span><span class="p">,</span> <span class="n">shell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set up the prompt_toolkit keyboard shortcuts for IPython&quot;&quot;&quot;</span>
    <span class="n">insert_mode</span> <span class="o">=</span> <span class="n">ViInsertMode</span><span class="p">()</span> <span class="o">|</span> <span class="n">EmacsInsertMode</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">shell</span><span class="p">,</span> <span class="s1">&#39;handle_return&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">return_handler</span> <span class="o">=</span> <span class="n">shell</span><span class="o">.</span><span class="n">handle_return</span><span class="p">(</span><span class="n">shell</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">return_handler</span> <span class="o">=</span> <span class="n">newline_or_execute_outer</span><span class="p">(</span><span class="n">shell</span><span class="p">)</span>

    <span class="c1"># Ctrl+J == Enter, seemingly</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlJ</span><span class="p">,</span>
                         <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                                 <span class="o">&amp;</span> <span class="o">~</span><span class="n">HasSelection</span><span class="p">()</span>
                                 <span class="o">&amp;</span> <span class="n">insert_mode</span>
                        <span class="p">))(</span><span class="n">return_handler</span><span class="p">)</span>

    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlBackslash</span><span class="p">)(</span><span class="n">force_exit</span><span class="p">)</span>

    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlP</span><span class="p">,</span>
                         <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">ViInsertMode</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                        <span class="p">))(</span><span class="n">previous_history_or_previous_completion</span><span class="p">)</span>

    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlN</span><span class="p">,</span>
                         <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">ViInsertMode</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                        <span class="p">))(</span><span class="n">next_history_or_next_completion</span><span class="p">)</span>

    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlG</span><span class="p">,</span>
                         <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">HasCompletions</span><span class="p">()</span>
                        <span class="p">))(</span><span class="n">dismiss_completion</span><span class="p">)</span>

    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlC</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                        <span class="p">)(</span><span class="n">reset_buffer</span><span class="p">)</span>

    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlC</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">SEARCH_BUFFER</span><span class="p">)</span>
                        <span class="p">)(</span><span class="n">reset_search_buffer</span><span class="p">)</span>

    <span class="n">supports_suspend</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="k">lambda</span> <span class="n">cli</span><span class="p">:</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="s1">&#39;SIGTSTP&#39;</span><span class="p">))</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlZ</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">supports_suspend</span>
                        <span class="p">)(</span><span class="n">suspend_to_bg</span><span class="p">)</span>

    <span class="c1"># Ctrl+I == Tab</span>
    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlI</span><span class="p">,</span>
                         <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                                 <span class="o">&amp;</span> <span class="o">~</span><span class="n">HasSelection</span><span class="p">()</span>
                                 <span class="o">&amp;</span> <span class="n">insert_mode</span>
                                 <span class="o">&amp;</span> <span class="n">cursor_in_leading_ws</span>
                        <span class="p">))(</span><span class="n">indent_buffer</span><span class="p">)</span>

    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlO</span><span class="p">,</span>
                         <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                                <span class="o">&amp;</span> <span class="n">EmacsInsertMode</span><span class="p">()))(</span><span class="n">newline_autoindent_outer</span><span class="p">(</span><span class="n">shell</span><span class="o">.</span><span class="n">input_splitter</span><span class="p">))</span>

    <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">F2</span><span class="p">,</span>
                         <span class="nb">filter</span><span class="o">=</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                        <span class="p">)(</span><span class="n">open_input_in_editor</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">shell</span><span class="o">.</span><span class="n">display_completions</span> <span class="o">==</span> <span class="s1">&#39;readlinelike&#39;</span><span class="p">:</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlI</span><span class="p">,</span>
                             <span class="nb">filter</span><span class="o">=</span><span class="p">(</span><span class="n">HasFocus</span><span class="p">(</span><span class="n">DEFAULT_BUFFER</span><span class="p">)</span>
                                     <span class="o">&amp;</span> <span class="o">~</span><span class="n">HasSelection</span><span class="p">()</span>
                                     <span class="o">&amp;</span> <span class="n">insert_mode</span>
                                     <span class="o">&amp;</span> <span class="o">~</span><span class="n">cursor_in_leading_ws</span>
                            <span class="p">))(</span><span class="n">display_completions_like_readline</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;win32&#39;</span><span class="p">:</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add_binding</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ControlV</span><span class="p">,</span>
                             <span class="nb">filter</span><span class="o">=</span><span class="p">(</span>
                             <span class="n">HasFocus</span><span class="p">(</span>
                             <span class="n">DEFAULT_BUFFER</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">ViMode</span><span class="p">()</span>
                            <span class="p">))(</span><span class="n">win_paste</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="basic_customization.html" title="previous chapter">2. Configuring Prompt Toolkit in IPython</a></li>
      <li>Next: <a href="custom_keyboard_shortcuts.html" title="next chapter">4. Keyboard Shortcut Customization</a></li>
  </ul></li>
</ul>
<h3><a href="index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="startup.html">1. Startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_customization.html">2. Basic Customization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Keybindings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#run-in-shell">3.1. Run in shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#original-file-implementation">3.2. Original File Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#official-ipython-documentation">3.3. Official IPython Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#source-code-for-creating-ipython-shortcuts">3.4. Source code for creating IPython shortcuts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_keyboard_shortcuts.html">4. Customizing the keybindings further</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_interactive_shell.html">5. Interactive Shell Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="magics.html">6. Built-in Magics</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_magics.html">7. Defining custom magics</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_magics.html#complete-example">8. Complete Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="directive.html">9. Sphinx Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output.html">10. Rich Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="pygments.html">11. Pygments highlighting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="API.html">API</a></li>
</ul>

  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. Keybindings in IPython</a><ul>
<li><a class="reference internal" href="#run-in-shell">3.1. Run in shell</a></li>
<li><a class="reference internal" href="#original-file-implementation">3.2. Original File Implementation</a></li>
<li><a class="reference internal" href="#official-ipython-documentation">3.3. Official IPython Documentation</a><ul>
<li><a class="reference internal" href="#pure-prompt-toolkit-way-of-rebinding-keys">3.3.1. Pure Prompt Toolkit Way of Rebinding Keys</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source-code-for-creating-ipython-shortcuts">3.4. Source code for creating IPython shortcuts</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ipython_keybindings.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="custom_keyboard_shortcuts.html" title="4. Keyboard Shortcut Customization"
             >next</a> |</li>
        <li class="right" >
          <a href="basic_customization.html" title="2. Configuring Prompt Toolkit in IPython"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Dynamic IPython 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Copyright (C) 2018-2019 Faris Chugthai.
    </div>
  </body>
</html>